<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LOKAYA GFX ‚Äî Elite Design Studio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:wght@300;400;500;600;700;800&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet"/>

  <script type="module">
    import { initializeApp }
      from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import {
      getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged, updateProfile
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import {
      getFirestore, collection, addDoc, getDocs, getDoc,
      deleteDoc, doc, setDoc, updateDoc, query,
      orderBy, where, serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
    /* Cloudinary config ‚Äî no Firebase Storage needed */
    const CLOUDINARY_CLOUD = "dsyvnaog6";
    const CLOUDINARY_PRESET = "lokaya_uploads";

    /* ‚îÄ‚îÄ CONFIG ‚îÄ‚îÄ */
    const firebaseConfig = {
      apiKey:            "AIzaSyBBsP0-ODrStB6QOdlzQVpcR-k20mhhSZY",
      authDomain:        "lokayafx-ef19a.firebaseapp.com",
      projectId:         "lokayafx-ef19a",
      storageBucket:     "lokayafx-ef19a.firebasestorage.app",
      messagingSenderId: "546398827272",
      appId:             "1:546398827272:web:ea0848652769622591b2bd"
    };
    const ADMIN_EMAIL    = "itzlokaya@gmail.com";
    const WA_NUMBER      = "94678803361";
    const ORDER_EMAIL    = "lokayafx@gmail.com";
    let   SITE_LOGO_URL  = "";              // Admin dashboard ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä set ‡∑Ä‡∑ô‡∂±‡∑Ä‡∑è

    const app      = initializeApp(firebaseConfig);
    const auth     = getAuth(app);
    const db       = getFirestore(app);
    const provider = new GoogleAuthProvider();

    let currentUser    = null;
    let portfolioItems = [];
    let statusItems    = [];

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       AUTH
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    window.loginWithGoogle = async () => {
      try {
        await signInWithPopup(auth, provider);
      } catch (e) {
        if (e.code !== "auth/popup-closed-by-user")
          showToast("Login failed: " + e.message, "error");
      }
    };

    window.logoutUser = async () => {
      await signOut(auth);
      showView("public");
      showToast("Signed out. See you next time! üëã", "info");
    };

    async function ensureUserDoc(user) {
      const ref  = doc(db, "users", user.uid);
      const snap = await getDoc(ref);
      if (!snap.exists()) {
        await setDoc(ref, {
          uid: user.uid, email: user.email,
          displayName: user.displayName || "",
          photoURL: user.photoURL || "",
          joinedAt: serverTimestamp(),
          paid_works_count: 0
        });
      } else {
        const d = snap.data();
        // Only update from Google if user hasn't set a custom name/photo
        const updates = {};
        if (!d.customDisplayName && user.displayName) updates.displayName = user.displayName;
        if (!d.customPhotoURL && user.photoURL) updates.photoURL = user.photoURL;
        if (Object.keys(updates).length) await updateDoc(ref, updates);
      }
    }

    onAuthStateChanged(auth, async user => {
      currentUser = user;
      const isAdmin = user && user.email === ADMIN_EMAIL;

      setEl("navLoginBtn",   !user);
      setEl("navLogoutBtn",  !!user);
      setEl("navAdminBtn",   isAdmin);
      setEl("navProfileBtn", !!user && !isAdmin);
      setEl("mNavLoginBtn",  !user);
      setEl("mNavLogoutBtn", !!user);
      setEl("mNavAdminBtn",  isAdmin);
      setEl("mNavProfileBtn",!!user && !isAdmin);

      // Hide "Sign In to track orders" CTA if already logged in
      const ctaSection = document.getElementById("loginCTA");
      if (ctaSection) ctaSection.style.display = user ? "none" : "";

      if (user) {
        await ensureUserDoc(user);
        if (!isAdmin && document.getElementById("dashboard")?.classList.contains("active-view"))
          showView("public");
      } else {
        const v = ["profile","dashboard"].find(id => document.getElementById(id)?.classList.contains("active-view"));
        if (v) showView("public");
      }
    });

    function setEl(id, show) {
      const el = document.getElementById(id);
      if (el) el.classList.toggle("hidden", !show);
    }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       VIEWS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    window.showView = (view) => {
      document.querySelectorAll(".view").forEach(v => v.classList.remove("active-view"));
      const el = document.getElementById(view);
      if (!el) return;
      el.classList.add("active-view");
      window.scrollTo({ top: 0, behavior: "smooth" });

      if (view === "public") { loadPublicPortfolio(); loadPublicStatus(); loadPublicVault(); loadPublicPricing(); }
      if (view === "dashboard") {
        if (!currentUser || currentUser.email !== ADMIN_EMAIL) {
          showView("public"); showToast("Admin access only.", "error"); return;
        }
        loadDashboardPortfolio(); loadDashboardStatus(); loadAdminUsers(); loadAdminVault(); loadAdminPricing();
        showDash("dash");
      }
      if (view === "profile") {
        if (!currentUser) { showToast("Please sign in first.", "error"); showView("public"); return; }
        loadProfileView();
      }
    };

    window.showDash = (sec) => {
      document.querySelectorAll(".dash-section").forEach(s => s.classList.remove("active-dash"));
      document.getElementById(sec + "Section")?.classList.add("active-dash");
      document.querySelectorAll(".dash-tab").forEach(t => t.classList.remove("tab-active"));
      document.getElementById("tab-" + sec)?.classList.add("tab-active");
    };

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       CLOUDINARY UPLOAD HELPER (Free, no card needed)
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    async function uploadToCloudinary(file, folder = "lokaya") {
      const formData = new FormData();
      formData.append("file", file);
      formData.append("upload_preset", CLOUDINARY_PRESET);
      formData.append("folder", folder);

      const res = await fetch(
        `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD}/image/upload`,
        { method: "POST", body: formData }
      );
      if (!res.ok) {
        const err = await res.json();
        throw new Error(err.error?.message || "Upload failed");
      }
      const data = await res.json();
      return data.secure_url;
    }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       PROFILE VIEW
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    async function loadProfileView() {
      if (!currentUser) return;
      const ref  = doc(db, "users", currentUser.uid);
      const snap = await getDoc(ref);
      const data = snap.exists() ? snap.data() : {};

      const displayName = data.customDisplayName || data.displayName || currentUser.displayName || "Player";
      const photoURL    = data.customPhotoURL    || data.photoURL    || currentUser.photoURL    || "";

      document.getElementById("profileAvatar").src = photoURL || "https://placehold.co/100x100/1a0033/bf00ff?text=U";
      document.getElementById("profileName").textContent  = displayName;
      document.getElementById("profileEmail").textContent = currentUser.email;
      document.getElementById("editDisplayName").value    = displayName;

      const joined = data.joinedAt?.toDate();
      document.getElementById("profileJoined").textContent = joined
        ? joined.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}) : "‚Äî";
      document.getElementById("profilePaidWorks").textContent = data.paid_works_count ?? 0;

      loadUserOrders();
    }

    /* ‚îÄ‚îÄ UPDATE DISPLAY NAME ‚îÄ‚îÄ */
    window.saveDisplayName = async () => {
      if (!currentUser) return;
      const newName = document.getElementById("editDisplayName").value.trim();
      if (!newName) { showToast("Name cannot be empty.", "error"); return; }
      setBtnLoading("saveNameBtn", true);
      try {
        await updateDoc(doc(db, "users", currentUser.uid), {
          customDisplayName: newName, displayName: newName
        });
        await updateProfile(currentUser, { displayName: newName });
        document.getElementById("profileName").textContent = newName;
        showToast("Display name updated! ‚úì", "success");
      } catch (e) { showToast("Error: " + e.message, "error"); }
      setBtnLoading("saveNameBtn", false);
    };

    /* ‚îÄ‚îÄ UPLOAD PROFILE PICTURE ‚îÄ‚îÄ */
    window.handleAvatarUpload = async (input) => {
      if (!input.files[0] || !currentUser) return;
      const file = input.files[0];
      if (file.size > 2 * 1024 * 1024) { showToast("Image must be under 2MB.", "error"); return; }
      if (!file.type.startsWith("image/")) { showToast("Please select an image file.", "error"); return; }

      showToast("Uploading photo...", "info");
      try {
        const url = await uploadToCloudinary(file, "lokaya/avatars");
        await updateDoc(doc(db, "users", currentUser.uid), { customPhotoURL: url, photoURL: url });
        await updateProfile(currentUser, { photoURL: url });
        document.getElementById("profileAvatar").src = url;
        showToast("Profile picture updated! ‚úì", "success");
      } catch (e) { showToast("Upload failed: " + e.message, "error"); }
    };

    async function loadUserOrders() {
      const cont = document.getElementById("userOrdersCont");
      cont.innerHTML = `<div class="flex justify-center py-10"><div class="spinner"></div></div>`;
      if (!currentUser) return;
      try {
        const q    = query(collection(db,"status"), where("customerEmail","==",currentUser.email), orderBy("createdAt","desc"));
        const snap = await getDocs(q);
        const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));
        if (!items.length) {
          cont.innerHTML = `<div class="text-center py-12">
            <i class="fa-solid fa-inbox text-purple-900 text-4xl mb-3"></i>
            <p class="font-poppins text-gray-600 text-sm">No active orders yet.</p>
            <p class="font-mono text-xs text-gray-700 mt-1">Orders appear here once the admin creates them for your email.</p>
          </div>`; return;
        }
        const LABELS={10:"Starting",25:"In Progress",50:"Halfway",75:"Almost Done",100:"Complete ‚úì"};
        const COLORS={10:"#6b21a8",25:"#7e22ce",50:"#9333ea",75:"#a855f7",100:"#22c55e"};
        cont.innerHTML = items.map(item => {
          const pct=item.progress||10, label=LABELS[pct]||"In Progress", color=COLORS[pct]||"#9333ea";
          return `<div class="glass-card rounded-xl p-5">
            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4">
              <div>
                <p class="font-bebas text-xl text-white tracking-wider">${escHtml(item.projectTitle||"Design Project")}</p>
                <p class="font-mono text-xs text-purple-400 mt-0.5">${escHtml(item.clientName||"")}</p>
              </div>
              <div class="flex items-center gap-3">
                <span class="status-pill" style="color:${color};border-color:${color}40;background:${color}15;">${label}</span>
                <span class="font-bebas text-2xl" style="color:${color}">${pct}%</span>
              </div>
            </div>
            <div class="progress-track"><div class="progress-fill" style="width:${pct}%;--pct:${pct}%"></div></div>
          </div>`;
        }).join("");
      } catch (err) {
        cont.innerHTML = `<p class="text-center text-red-400 py-8 text-sm">Error: ${err.message}</p>`;
      }
    }
    window.loadUserOrders = loadUserOrders;

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       SITE SETTINGS (Logo URL stored in Firestore)
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    async function loadSiteSettings() {
      try {
        const snap = await getDoc(doc(db, "settings", "site"));
        if (snap.exists() && snap.data().logoUrl) {
          SITE_LOGO_URL = snap.data().logoUrl;
          updateNavLogo(SITE_LOGO_URL);
        }
      } catch(e){}
    }

    function updateNavLogo(url) {
      const logos = document.querySelectorAll(".site-logo-img");
      logos.forEach(el => {
        el.src = url;
        el.classList.remove("hidden");
      });
      // Hide the default fire icon + text
      const icon = document.getElementById("navLogoIcon");
      const text = document.getElementById("navLogoText");
      if (icon) icon.classList.add("hidden");
      if (text) text.classList.add("hidden");
      // Update branding preview
      const preview = document.getElementById("logoPreview");
      if (preview) { preview.src = url; preview.classList.remove("hidden"); }
    }

    window.saveLogoUrl = async () => {
      const url = document.getElementById("siteLogoUrl").value.trim();
      if (!url) { showToast("Please enter or upload a logo URL.", "error"); return; }
      setBtnLoading("saveLogoBtn", true);
      try {
        await setDoc(doc(db, "settings", "site"), { logoUrl: url }, { merge: true });
        SITE_LOGO_URL = url;
        updateNavLogo(url);
        document.getElementById("logoPreview").src = url;
        document.getElementById("logoPreview").classList.remove("hidden");
        showToast("Logo updated! ‚úì", "success");
      } catch(e) { showToast("Error: " + e.message, "error"); }
      setBtnLoading("saveLogoBtn", false);
    };

    window.handleLogoUpload = async (input) => {
      const file = input.files[0];
      if (!file) return;
      if (file.size > 2 * 1024 * 1024) { showToast("Logo must be under 2MB.", "error"); return; }
      showToast("Uploading logo...", "info");
      try {
        const url = await uploadToCloudinary(file, "lokaya/branding");
        document.getElementById("siteLogoUrl").value = url;
        document.getElementById("logoPreview").src = url;
        document.getElementById("logoPreview").classList.remove("hidden");
        showToast("Logo uploaded! Click Save to apply. ‚úì", "success");
      } catch(e) { showToast("Upload failed: " + e.message, "error"); }
    };

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       ORDER MODAL
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    window.openOrderModal = (designTitle) => {
      document.getElementById("orderDesignTitle").textContent = designTitle;
      document.getElementById("orderDesignRef").value = designTitle;
      document.getElementById("orderModal").classList.remove("hidden");
      document.getElementById("orderModal").classList.add("flex");
      document.body.style.overflow = "hidden";
    };

    window.closeOrderModal = () => {
      document.getElementById("orderModal").classList.add("hidden");
      document.getElementById("orderModal").classList.remove("flex");
      document.body.style.overflow = "";
      // Reset form
      ["orderName","orderEmail","orderPhone","orderDesc","orderBudget"].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.value = "";
      });
      document.getElementById("orderSuccess").classList.add("hidden");
      document.getElementById("orderFormInner").classList.remove("hidden");
    };

    window.orderViaWhatsApp = (designTitle) => {
      const msg = encodeURIComponent(
        `üî• *Order Request ‚Äî LOKAYA GFX*\n\n` +
        `Design: ${designTitle}\n` +
        `Hi! I want to place an order for the above design. Please let me know the details.`
      );
      window.open(`https://wa.me/${WA_NUMBER}?text=${msg}`, "_blank");
    };

    window.submitWebOrder = async () => {
      const name    = document.getElementById("orderName").value.trim();
      const email   = document.getElementById("orderEmail").value.trim();
      const phone   = document.getElementById("orderPhone").value.trim();
      const design  = document.getElementById("orderDesignRef").value.trim();
      const desc    = document.getElementById("orderDesc").value.trim();
      const budget  = document.getElementById("orderBudget").value.trim();

      if (!name || !email || !desc) {
        showToast("Name, email and description are required.", "error"); return;
      }
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        showToast("Please enter a valid email.", "error"); return;
      }

      setBtnLoading("submitOrderBtn", true);
      showToast("Sending order...", "info");

      try {
        // 1. Save order to Firestore
        await addDoc(collection(db, "orders"), {
          name, email, phone, design, desc, budget,
          status: "pending",
          createdAt: serverTimestamp()
        });

        // 2. Send email via FormSubmit (free, no backend needed)
        const formData = new FormData();
        formData.append("_subject", `üî• New Order ‚Äî ${design} ‚Äî ${name}`);
        formData.append("_template", "table");
        formData.append("_captcha", "false");
        formData.append("Customer Name", name);
        formData.append("Customer Email", email);
        formData.append("Phone / Discord", phone || "Not provided");
        formData.append("Design Requested", design);
        formData.append("Description", desc);
        formData.append("Budget", budget || "Not specified");

        await fetch(`https://formsubmit.co/${ORDER_EMAIL}`, {
          method: "POST", body: formData
        });

        // Show success
        document.getElementById("orderFormInner").classList.add("hidden");
        document.getElementById("orderSuccess").classList.remove("hidden");
        showToast("Order sent! ‚úì", "success");
      } catch(e) {
        showToast("Error sending order: " + e.message, "error");
      }
      setBtnLoading("submitOrderBtn", false);
    };

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       LOAD PUBLIC PORTFOLIO (with Order Now button)
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    async function fetchPortfolio() {
      const q = query(collection(db,"portfolio"), orderBy("createdAt","desc"));
      const snap = await getDocs(q);
      portfolioItems = snap.docs.map(d => ({ id: d.id, ...d.data() }));
      return portfolioItems;
    }

    async function loadPublicPortfolio() {
      const grid = document.getElementById("portfolioGrid");
      if (!grid) return;
      grid.innerHTML = `<div class="col-span-full flex justify-center py-16"><div class="spinner"></div></div>`;
      const items = await fetchPortfolio();
      if (!items.length) {
        grid.innerHTML = `<div class="col-span-full text-center py-16 text-gray-600">No portfolio items yet.</div>`; return;
      }
      grid.innerHTML = items.map(item => `
        <div class="glass-card rounded-2xl overflow-hidden flex flex-col">
          <!-- Image ‚Äî click to lightbox -->
          <div class="relative overflow-hidden aspect-video bg-black/40 cursor-pointer group"
               onclick="openLightbox('${escAttr(item.imageUrl)}','${escAttr(item.title)}','${escAttr(item.desc||"")}')">
            <img src="${escHtml(item.imageUrl)}" alt="${escHtml(item.title)}"
              class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
              onerror="this.src='https://placehold.co/600x340/1a0033/bf00ff?text=GFX'"/>
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-4">
              <span class="text-white font-poppins text-xs uppercase tracking-widest flex items-center gap-1">
                <i class="fa-solid fa-magnifying-glass text-xs"></i> Preview
              </span>
            </div>
            ${item.category?`<span class="absolute top-3 left-3 badge">${escHtml(item.category)}</span>`:""}
          </div>
          <!-- Info + Order Button -->
          <div class="p-5 flex flex-col flex-1">
            <h3 class="font-bebas text-xl text-white tracking-wider mb-1">${escHtml(item.title)}</h3>
            <p class="font-poppins text-gray-500 text-xs leading-relaxed line-clamp-2 flex-1 mb-4">${escHtml(item.desc||"")}</p>
            <!-- ORDER NOW BUTTON -->
            <button onclick="openOrderChoice('${escAttr(item.title)}')"
              class="btn-purple w-full py-2.5 rounded-xl font-poppins font-semibold text-sm text-white flex items-center justify-center gap-2 mt-auto">
              <i class="fa-solid fa-bag-shopping text-sm"></i> Order Now
            </button>
          </div>
        </div>`).join("");
    }
    window.loadPublicPortfolio = loadPublicPortfolio;

    /* Order Choice popup ‚Äî WhatsApp or Web */
    window.openOrderChoice = (title) => {
      document.getElementById("choiceTitle").textContent = title;
      document.getElementById("choiceDesign").value = title;
      document.getElementById("orderChoiceModal").classList.remove("hidden");
      document.getElementById("orderChoiceModal").classList.add("flex");
      document.body.style.overflow = "hidden";
    };
    window.closeOrderChoice = () => {
      document.getElementById("orderChoiceModal").classList.add("hidden");
      document.getElementById("orderChoiceModal").classList.remove("flex");
      document.body.style.overflow = "";
    };
    window.chooseWhatsApp = () => {
      const title = document.getElementById("choiceDesign").value;
      closeOrderChoice();
      orderViaWhatsApp(title);
    };
    window.chooseWebOrder = () => {
      const title = document.getElementById("choiceDesign").value;
      closeOrderChoice();
      openOrderModal(title);
    };

    async function loadDashboardPortfolio() {
      const list = document.getElementById("dashPortfolioList");
      if (!list) return;
      list.innerHTML = `<div class="flex justify-center py-10"><div class="spinner"></div></div>`;
      const items = await fetchPortfolio();
      const el = document.getElementById("statPortfolio");
      if (el) el.textContent = items.length;
      if (!items.length) { list.innerHTML = `<p class="text-center text-gray-600 py-10 text-sm">No items yet.</p>`; return; }
      list.innerHTML = items.map(item => `
        <div class="glass-card rounded-xl flex items-center gap-4 p-4">
          <img src="${escHtml(item.imageUrl)}" class="w-16 h-12 object-cover rounded-lg flex-shrink-0 bg-black/40"
            onerror="this.src='https://placehold.co/64x48/1a0033/bf00ff?text=IMG'"/>
          <div class="flex-1 min-w-0">
            <p class="font-bebas text-white text-lg tracking-wider truncate">${escHtml(item.title)}</p>
            <p class="font-poppins text-gray-500 text-xs truncate">${item.category||"Uncategorized"}</p>
          </div>
          <div class="flex gap-2 flex-shrink-0">
            <button onclick="editPortfolioItem('${item.id}','${escAttr(item.title)}','${escAttr(item.desc||"")}','${escAttr(item.imageUrl)}','${escAttr(item.category||"")}')"
              class="btn-icon text-blue-400 hover:text-blue-300"><i class="fa-solid fa-pen text-xs"></i></button>
            <button onclick="deletePortfolioItem('${item.id}')"
              class="btn-icon text-red-400 hover:text-red-300"><i class="fa-solid fa-trash text-xs"></i></button>
          </div>
        </div>`).join("");
    }
    window.loadDashboardPortfolio = loadDashboardPortfolio;

    /* Portfolio Image Upload */
    window.handlePortfolioImageUpload = async (input) => {
      const file = input.files[0];
      if (!file) return;
      if (file.size > 5 * 1024 * 1024) { showToast("Image must be under 5MB.", "error"); return; }
      document.getElementById("pImgPreview").classList.remove("hidden");
      document.getElementById("pImgPreview").src = URL.createObjectURL(file);
      document.getElementById("pImgUrlRow").classList.add("hidden");
      document.getElementById("pImgUploadStatus").textContent = `‚úì ${file.name} selected`;
      document.getElementById("pImgUploadStatus").className = "font-mono text-xs text-green-400 mt-1";
    };

    window.togglePortfolioImgMode = (mode) => {
      if (mode === "upload") {
        document.getElementById("pImgUploadRow").classList.remove("hidden");
        document.getElementById("pImgUrlRow").classList.add("hidden");
        document.getElementById("imgModeUpload").classList.add("tab-active");
        document.getElementById("imgModeUrl").classList.remove("tab-active");
      } else {
        document.getElementById("pImgUploadRow").classList.add("hidden");
        document.getElementById("pImgUrlRow").classList.remove("hidden");
        document.getElementById("imgModeUpload").classList.remove("tab-active");
        document.getElementById("imgModeUrl").classList.add("tab-active");
        document.getElementById("pImgPreview").classList.add("hidden");
      }
    };

    window.savePortfolioItem = async () => {
      const editId = document.getElementById("editPortfolioId").value;
      const title  = document.getElementById("pTitle").value.trim();
      const desc   = document.getElementById("pDesc").value.trim();
      const cat    = document.getElementById("pCat").value.trim();
      const fileInput = document.getElementById("pImgFile");
      const urlInput  = document.getElementById("pImg");
      const useUpload = !document.getElementById("pImgUploadRow").classList.contains("hidden");

      if (!title) { showToast("Title is required.", "error"); return; }
      if (useUpload && !fileInput.files[0] && !editId) { showToast("Please select an image.", "error"); return; }
      if (!useUpload && !urlInput.value.trim() && !editId) { showToast("Image URL is required.", "error"); return; }

      setBtnLoading("savePortfolioBtn", true);
      showToast("Saving...", "info");
      try {
        let imgUrl = urlInput.value.trim();
        if (useUpload && fileInput.files[0]) {
          const file = fileInput.files[0];
          showToast("Uploading image to Cloudinary...", "info");
          imgUrl = await uploadToCloudinary(file, "lokaya/portfolio");
        }
        const data = { title, desc, imageUrl: imgUrl, category: cat };
        if (editId) {
          await updateDoc(doc(db,"portfolio",editId), data);
          showToast("Item updated! ‚úì", "success");
        } else {
          await addDoc(collection(db,"portfolio"), { ...data, createdAt: serverTimestamp() });
          showToast("Added to Armory! ‚úì", "success");
        }
        clearPortfolioForm(); loadDashboardPortfolio(); loadPublicPortfolio();
      } catch (e) { showToast("Error: " + e.message, "error"); }
      setBtnLoading("savePortfolioBtn", false);
    };

    window.editPortfolioItem = (id, title, desc, img, cat) => {
      document.getElementById("editPortfolioId").value = id;
      document.getElementById("pTitle").value  = title;
      document.getElementById("pDesc").value   = desc;
      document.getElementById("pImg").value    = img;
      document.getElementById("pCat").value    = cat;
      togglePortfolioImgMode("url");
      document.getElementById("pImgPreview").classList.remove("hidden");
      document.getElementById("pImgPreview").src = img;
      document.getElementById("savePortfolioBtn").innerHTML = '<i class="fa-solid fa-floppy-disk mr-2"></i>Update Item';
      document.getElementById("cancelEditPortfolio").classList.remove("hidden");
      document.getElementById("portfolioForm").scrollIntoView({behavior:"smooth"});
    };
    window.cancelPortfolioEdit = () => clearPortfolioForm();

    function clearPortfolioForm() {
      ["editPortfolioId","pTitle","pDesc","pImg"].forEach(id => document.getElementById(id).value="");
      document.getElementById("pCat").value = "";
      document.getElementById("pImgFile").value = "";
      document.getElementById("pImgPreview").classList.add("hidden");
      document.getElementById("pImgUploadStatus").textContent = "";
      document.getElementById("savePortfolioBtn").innerHTML = '<i class="fa-solid fa-plus mr-2"></i>Add to Armory';
      document.getElementById("cancelEditPortfolio").classList.add("hidden");
    }

    window.deletePortfolioItem = async (id) => {
      if (!confirm("Delete this portfolio item?")) return;
      try {
        await deleteDoc(doc(db,"portfolio",id));
        showToast("Deleted.", "success"); loadDashboardPortfolio(); loadPublicPortfolio();
      } catch (e) { showToast("Error: " + e.message, "error"); }
    };

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       STATUS TRACKER
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    async function fetchStatus() {
      const q = query(collection(db,"status"), orderBy("createdAt","desc"));
      const snap = await getDocs(q);
      statusItems = snap.docs.map(d => ({ id: d.id, ...d.data() }));
      return statusItems;
    }

    async function loadPublicStatus() {
      const cont = document.getElementById("statusContainer");
      if (!cont) return;
      cont.innerHTML = `<div class="flex justify-center py-10"><div class="spinner"></div></div>`;
      const items = await fetchStatus();
      if (!items.length) { cont.innerHTML = `<p class="text-center text-gray-600 py-10 text-sm">No active projects.</p>`; return; }
      const LABELS={10:"Starting",25:"In Progress",50:"Halfway",75:"Almost Done",100:"Complete ‚úì"};
      cont.innerHTML = items.map(item => {
        const pct=item.progress||10, label=LABELS[pct]||"In Progress";
        return `<div class="glass-card rounded-xl p-5">
          <div class="flex items-center justify-between mb-3">
            <div>
              <p class="font-bebas text-white text-lg tracking-wider">${escHtml(item.clientName)}</p>
              <p class="font-mono text-xs text-purple-400 mt-0.5">${escHtml(item.projectTitle||"Design Project")}</p>
            </div>
            <div class="text-right">
              <span class="font-bebas text-2xl text-purple-300">${pct}%</span>
              <p class="font-poppins text-xs text-gray-500">${label}</p>
            </div>
          </div>
          <div class="progress-track"><div class="progress-fill" style="width:${pct}%;--pct:${pct}%"></div></div>
        </div>`;
      }).join("");
    }
    window.loadPublicStatus = loadPublicStatus;

    async function loadDashboardStatus() {
      const list = document.getElementById("dashStatusList");
      if (!list) return;
      list.innerHTML = `<div class="flex justify-center py-10"><div class="spinner"></div></div>`;
      const items = await fetchStatus();
      const el = document.getElementById("statStatus");
      if (el) el.textContent = items.length;
      if (!items.length) { list.innerHTML = `<p class="text-center text-gray-600 py-10 text-sm">No status items.</p>`; return; }
      list.innerHTML = items.map(item => {
        const pct=item.progress||10;
        return `<div class="glass-card rounded-xl p-4">
          <div class="flex items-start gap-3">
            <div class="flex-1 min-w-0">
              <p class="font-bebas text-white text-lg tracking-wider truncate">${escHtml(item.clientName)}</p>
              <p class="font-poppins text-gray-500 text-xs truncate">${escHtml(item.projectTitle||"")}</p>
              ${item.customerEmail?`<p class="font-mono text-xs text-purple-500 truncate mt-0.5"><i class="fa-solid fa-envelope text-xs mr-1"></i>${escHtml(item.customerEmail)}</p>`:
              `<p class="font-mono text-xs text-gray-700 mt-0.5">No email linked</p>`}
            </div>
            <span class="font-bebas text-xl text-purple-300 flex-shrink-0">${pct}%</span>
            <div class="flex gap-2 flex-shrink-0">
              <button onclick="editStatusItem('${item.id}','${escAttr(item.clientName)}','${escAttr(item.projectTitle||"")}','${pct}','${escAttr(item.customerEmail||"")}')"
                class="btn-icon text-blue-400"><i class="fa-solid fa-pen text-xs"></i></button>
              <button onclick="deleteStatusItem('${item.id}')"
                class="btn-icon text-red-400"><i class="fa-solid fa-trash text-xs"></i></button>
            </div>
          </div>
          <div class="progress-track mt-3 h-2"><div class="progress-fill" style="width:${pct}%;--pct:${pct}%"></div></div>
        </div>`;
      }).join("");
    }
    window.loadDashboardStatus = loadDashboardStatus;

    window.saveStatusItem = async () => {
      const editId    = document.getElementById("editStatusId").value;
      const client    = document.getElementById("sClient").value.trim();
      const project   = document.getElementById("sProject").value.trim();
      const progress  = parseInt(document.getElementById("sProgress").value);
      const custEmail = document.getElementById("sCustomerEmail").value.trim().toLowerCase();
      if (!client) { showToast("Client name is required.", "error"); return; }
      setBtnLoading("saveStatusBtn", true);
      try {
        const data = {clientName:client, projectTitle:project, progress, customerEmail:custEmail};
        if (editId) { await updateDoc(doc(db,"status",editId), data); showToast("Updated! ‚úì","success"); }
        else { await addDoc(collection(db,"status"),{...data, createdAt:serverTimestamp()}); showToast("Status added! ‚úì","success"); }
        clearStatusForm(); loadDashboardStatus(); loadPublicStatus();
      } catch (e) { showToast("Error: "+e.message,"error"); }
      setBtnLoading("saveStatusBtn", false);
    };

    window.editStatusItem = (id,client,project,progress,custEmail) => {
      document.getElementById("editStatusId").value      = id;
      document.getElementById("sClient").value           = client;
      document.getElementById("sProject").value          = project;
      document.getElementById("sProgress").value         = progress;
      document.getElementById("sCustomerEmail").value    = custEmail;
      document.getElementById("saveStatusBtn").innerHTML = '<i class="fa-solid fa-floppy-disk mr-2"></i>Update Status';
      document.getElementById("cancelEditStatus").classList.remove("hidden");
      document.getElementById("statusForm").scrollIntoView({behavior:"smooth"});
    };
    window.cancelStatusEdit = () => clearStatusForm();

    function clearStatusForm() {
      ["editStatusId","sClient","sProject","sCustomerEmail"].forEach(id => document.getElementById(id).value="");
      document.getElementById("sProgress").value = "50";
      document.getElementById("saveStatusBtn").innerHTML = '<i class="fa-solid fa-plus mr-2"></i>Add Status';
      document.getElementById("cancelEditStatus").classList.add("hidden");
    }

    window.deleteStatusItem = async (id) => {
      if (!confirm("Delete this status?")) return;
      try { await deleteDoc(doc(db,"status",id)); showToast("Deleted.","success"); loadDashboardStatus(); loadPublicStatus(); }
      catch (e) { showToast("Error: "+e.message,"error"); }
    };

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       EDITORS VAULT (Free Pack Downloads)
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    async function fetchVault() {
      const q = query(collection(db,"vault"), orderBy("createdAt","desc"));
      const snap = await getDocs(q);
      return snap.docs.map(d => ({ id: d.id, ...d.data() }));
    }

    async function loadPublicVault() {
      const grid = document.getElementById("vaultGrid");
      if (!grid) return;
      grid.innerHTML = `<div class="col-span-full flex justify-center py-10"><div class="spinner"></div></div>`;
      const items = await fetchVault();
      if (!items.length) {
        grid.innerHTML = `<div class="col-span-full text-center py-12 text-gray-600">No packs yet. Check back soon!</div>`; return;
      }
      grid.innerHTML = items.map(item => `
        <div class="glass-card rounded-2xl overflow-hidden flex flex-col">
          ${item.previewUrl
            ? `<div class="aspect-video overflow-hidden bg-black/40">
                 <img src="${escHtml(item.previewUrl)}" alt="${escHtml(item.title)}"
                   class="w-full h-full object-cover" onerror="this.style.display='none'"/>
               </div>`
            : `<div class="aspect-video bg-gradient-to-br from-purple-950/60 to-black flex items-center justify-center">
                 <i class="fa-solid fa-box-open text-purple-700 text-4xl"></i>
               </div>`}
          <div class="p-5 flex flex-col flex-1">
            <div class="flex items-start justify-between gap-2 mb-2">
              <h3 class="font-bebas text-xl text-white tracking-wider">${escHtml(item.title)}</h3>
              ${item.fileCount?`<span class="badge flex-shrink-0">${escHtml(item.fileCount)} files</span>`:""}
            </div>
            <p class="font-poppins text-gray-500 text-xs leading-relaxed flex-1 mb-4">${escHtml(item.desc||"")}</p>
            ${item.fileSize?`<p class="font-mono text-xs text-gray-600 mb-3">${escHtml(item.fileSize)}</p>`:""}
            <a href="${escHtml(item.downloadUrl||"#")}" target="_blank"
               class="btn-liquid w-full py-3 rounded-xl font-poppins font-semibold text-sm text-purple-200 uppercase tracking-wider text-center flex items-center justify-center gap-2">
              <i class="fa-solid fa-download"></i> Free Download
            </a>
          </div>
        </div>`).join("");
    }
    window.loadPublicVault = loadPublicVault;

    async function loadAdminVault() {
      const list = document.getElementById("dashVaultList");
      if (!list) return;
      list.innerHTML = `<div class="flex justify-center py-10"><div class="spinner"></div></div>`;
      const items = await fetchVault();
      if (!items.length) { list.innerHTML = `<p class="text-center text-gray-600 py-10 text-sm">No vault packs yet.</p>`; return; }
      list.innerHTML = items.map(item => `
        <div class="glass-card rounded-xl p-4 flex items-center gap-4">
          ${item.previewUrl
            ? `<img src="${escHtml(item.previewUrl)}" class="w-14 h-12 object-cover rounded-lg flex-shrink-0 bg-black/40"/>`
            : `<div class="w-14 h-12 rounded-lg flex-shrink-0 bg-purple-950/40 flex items-center justify-center"><i class="fa-solid fa-box-open text-purple-600"></i></div>`}
          <div class="flex-1 min-w-0">
            <p class="font-bebas text-white text-lg tracking-wider truncate">${escHtml(item.title)}</p>
            <p class="font-mono text-xs text-gray-600">${item.fileCount||""} files ¬∑ ${item.fileSize||""}</p>
          </div>
          <div class="flex gap-2 flex-shrink-0">
            <button onclick="editVaultItem('${item.id}','${escAttr(item.title)}','${escAttr(item.desc||"")}','${escAttr(item.downloadUrl||"")}','${escAttr(item.previewUrl||"")}','${escAttr(item.fileCount||"")}','${escAttr(item.fileSize||"")}')"
              class="btn-icon text-blue-400"><i class="fa-solid fa-pen text-xs"></i></button>
            <button onclick="deleteVaultItem('${item.id}')"
              class="btn-icon text-red-400"><i class="fa-solid fa-trash text-xs"></i></button>
          </div>
        </div>`).join("");
    }
    window.loadAdminVault = loadAdminVault;

    window.saveVaultItem = async () => {
      const editId   = document.getElementById("editVaultId").value;
      const title    = document.getElementById("vTitle").value.trim();
      const desc     = document.getElementById("vDesc").value.trim();
      const dlUrl    = document.getElementById("vDownloadUrl").value.trim();
      const fileCount= document.getElementById("vFileCount").value.trim();
      const fileSize = document.getElementById("vFileSize").value.trim();
      const prevFile = document.getElementById("vPreviewFile").files[0];

      if (!title || !dlUrl) { showToast("Title and download URL required.", "error"); return; }
      setBtnLoading("saveVaultBtn", true);
      try {
        let previewUrl = document.getElementById("vPreviewUrl").value.trim();
        if (prevFile) {
          if (prevFile.size > 2*1024*1024) { showToast("Preview image must be under 2MB.","error"); setBtnLoading("saveVaultBtn",false); return; }
          showToast("Uploading preview...", "info");
          previewUrl = await uploadToCloudinary(prevFile, "lokaya/vault");
        }
        const data = {title,desc,downloadUrl:dlUrl,fileCount,fileSize,previewUrl};
        if (editId) { await updateDoc(doc(db,"vault",editId),data); showToast("Pack updated! ‚úì","success"); }
        else { await addDoc(collection(db,"vault"),{...data,createdAt:serverTimestamp()}); showToast("Pack added! ‚úì","success"); }
        clearVaultForm(); loadAdminVault(); loadPublicVault();
      } catch (e) { showToast("Error: "+e.message,"error"); }
      setBtnLoading("saveVaultBtn", false);
    };

    window.editVaultItem = (id,title,desc,dlUrl,previewUrl,fileCount,fileSize) => {
      document.getElementById("editVaultId").value       = id;
      document.getElementById("vTitle").value            = title;
      document.getElementById("vDesc").value             = desc;
      document.getElementById("vDownloadUrl").value      = dlUrl;
      document.getElementById("vPreviewUrl").value       = previewUrl;
      document.getElementById("vFileCount").value        = fileCount;
      document.getElementById("vFileSize").value         = fileSize;
      document.getElementById("saveVaultBtn").innerHTML  = '<i class="fa-solid fa-floppy-disk mr-2"></i>Update Pack';
      document.getElementById("cancelEditVault").classList.remove("hidden");
      document.getElementById("vaultForm").scrollIntoView({behavior:"smooth"});
    };
    window.cancelVaultEdit = () => clearVaultForm();

    function clearVaultForm() {
      ["editVaultId","vTitle","vDesc","vDownloadUrl","vPreviewUrl","vFileCount","vFileSize"].forEach(id=>document.getElementById(id).value="");
      document.getElementById("vPreviewFile").value="";
      document.getElementById("saveVaultBtn").innerHTML='<i class="fa-solid fa-plus mr-2"></i>Add Pack';
      document.getElementById("cancelEditVault").classList.add("hidden");
    }

    window.deleteVaultItem = async (id) => {
      if (!confirm("Delete this pack?")) return;
      try {
        await deleteDoc(doc(db,"vault",id));
        showToast("Deleted.","success"); loadAdminVault(); loadPublicVault();
      } catch (e) { showToast("Error: "+e.message,"error"); }
    };

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       PRICING / SUBSCRIPTION
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    async function fetchPricing() {
      const q = query(collection(db,"pricing"), orderBy("tier","asc"));
      const snap = await getDocs(q);
      return snap.docs.map(d => ({ id: d.id, ...d.data() }));
    }

    async function loadPublicPricing() {
      const cont = document.getElementById("pricingGrid");
      if (!cont) return;
      cont.innerHTML = `<div class="col-span-full flex justify-center py-10"><div class="spinner"></div></div>`;
      const items = await fetchPricing();
      if (!items.length) { cont.innerHTML = `<div class="col-span-full text-center py-12 text-gray-600">Pricing coming soon.</div>`; return; }

      cont.innerHTML = items.map((item,i) => {
        const isHighlighted = item.highlighted || false;
        const features = (item.features||"").split("\n").filter(f=>f.trim());
        return `
          <div class="glass-card rounded-2xl p-7 flex flex-col relative ${isHighlighted?"pricing-highlight":""}">
            ${isHighlighted?`<div class="absolute -top-3 left-1/2 -translate-x-1/2">
              <span class="font-bebas text-xs tracking-widest px-4 py-1 rounded-full text-white"
                style="background:linear-gradient(90deg,#7b00cc,#bf00ff);box-shadow:0 0 16px rgba(191,0,255,.6);">POPULAR</span>
            </div>`:""}
            <div class="mb-5 ${isHighlighted?"mt-2":""}">
              <p class="font-mono text-xs tracking-widest text-gray-500 uppercase mb-1">Tier ${item.tier||i+1}</p>
              <h3 class="font-bebas text-3xl ${isHighlighted?"text-purple-300":"text-white"} tracking-wider">${escHtml(item.name||"Plan")}</h3>
              <p class="font-poppins text-gray-500 text-xs mt-2">${escHtml(item.subtitle||"")}</p>
            </div>
            <div class="mb-6">
              <span class="font-bebas text-4xl text-white">${escHtml(item.price||"Free")}</span>
              ${item.period?`<span class="font-poppins text-gray-500 text-sm ml-1">/ ${escHtml(item.period)}</span>`:""}
            </div>
            <ul class="flex flex-col gap-2.5 mb-8 flex-1">
              ${features.map(f=>`
                <li class="flex items-start gap-2.5 font-poppins text-gray-400 text-sm">
                  <i class="fa-solid fa-check text-purple-400 text-xs mt-1 flex-shrink-0"></i>${escHtml(f.trim())}
                </li>`).join("")}
            </ul>
            ${item.ctaUrl
              ? `<a href="${escHtml(item.ctaUrl)}" target="_blank"
                   class="${isHighlighted?"btn-purple":"btn-liquid"} py-3 px-5 rounded-xl font-poppins font-semibold text-sm text-white uppercase tracking-wider text-center">
                   ${escHtml(item.ctaLabel||"Get Started")}
                 </a>`
              : `<button onclick="loginWithGoogle()"
                   class="${isHighlighted?"btn-purple":"btn-liquid"} py-3 px-5 rounded-xl font-poppins font-semibold text-sm text-white uppercase tracking-wider">
                   ${escHtml(item.ctaLabel||"Get Started")}
                 </button>`}
          </div>`;
      }).join("");
    }
    window.loadPublicPricing = loadPublicPricing;

    async function loadAdminPricing() {
      const list = document.getElementById("dashPricingList");
      if (!list) return;
      list.innerHTML = `<div class="flex justify-center py-10"><div class="spinner"></div></div>`;
      const items = await fetchPricing();
      if (!items.length) { list.innerHTML = `<p class="text-center text-gray-600 py-10 text-sm">No pricing tiers yet.</p>`; return; }
      list.innerHTML = items.map(item => `
        <div class="glass-card rounded-xl p-4 flex items-center gap-4">
          <div class="w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0"
               style="background:rgba(191,0,255,.15);border:1px solid rgba(191,0,255,.3)">
            <span class="font-bebas text-purple-300 text-lg">${item.tier||"?"}</span>
          </div>
          <div class="flex-1 min-w-0">
            <p class="font-bebas text-white text-lg tracking-wider">${escHtml(item.name||"")}</p>
            <p class="font-poppins text-gray-500 text-xs">${escHtml(item.price||"")} ${item.period?"/ "+item.period:""} ${item.highlighted?"¬∑ ‚≠ê Popular":""}</p>
          </div>
          <div class="flex gap-2 flex-shrink-0">
            <button onclick="editPricingItem('${item.id}',${item.tier||1},'${escAttr(item.name||"")}','${escAttr(item.subtitle||"")}','${escAttr(item.price||"")}','${escAttr(item.period||"")}','${escAttr(item.features||"")}','${escAttr(item.ctaLabel||"")}','${escAttr(item.ctaUrl||"")}',${!!item.highlighted})"
              class="btn-icon text-blue-400"><i class="fa-solid fa-pen text-xs"></i></button>
            <button onclick="deletePricingItem('${item.id}')"
              class="btn-icon text-red-400"><i class="fa-solid fa-trash text-xs"></i></button>
          </div>
        </div>`).join("");
    }
    window.loadAdminPricing = loadAdminPricing;

    window.savePricingItem = async () => {
      const editId      = document.getElementById("editPricingId").value;
      const tier        = parseInt(document.getElementById("prTier").value)||1;
      const name        = document.getElementById("prName").value.trim();
      const subtitle    = document.getElementById("prSubtitle").value.trim();
      const price       = document.getElementById("prPrice").value.trim();
      const period      = document.getElementById("prPeriod").value.trim();
      const features    = document.getElementById("prFeatures").value.trim();
      const ctaLabel    = document.getElementById("prCtaLabel").value.trim();
      const ctaUrl      = document.getElementById("prCtaUrl").value.trim();
      const highlighted = document.getElementById("prHighlighted").checked;
      if (!name||!price) { showToast("Name and price are required.","error"); return; }
      setBtnLoading("savePricingBtn",true);
      try {
        const data = {tier,name,subtitle,price,period,features,ctaLabel,ctaUrl,highlighted};
        if (editId) { await updateDoc(doc(db,"pricing",editId),data); showToast("Tier updated! ‚úì","success"); }
        else { await addDoc(collection(db,"pricing"),{...data,createdAt:serverTimestamp()}); showToast("Tier added! ‚úì","success"); }
        clearPricingForm(); loadAdminPricing(); loadPublicPricing();
      } catch (e) { showToast("Error: "+e.message,"error"); }
      setBtnLoading("savePricingBtn",false);
    };

    window.editPricingItem = (id,tier,name,subtitle,price,period,features,ctaLabel,ctaUrl,highlighted) => {
      document.getElementById("editPricingId").value    = id;
      document.getElementById("prTier").value           = tier;
      document.getElementById("prName").value           = name;
      document.getElementById("prSubtitle").value       = subtitle;
      document.getElementById("prPrice").value          = price;
      document.getElementById("prPeriod").value         = period;
      document.getElementById("prFeatures").value       = features.replace(/\\n/g,"\n");
      document.getElementById("prCtaLabel").value       = ctaLabel;
      document.getElementById("prCtaUrl").value         = ctaUrl;
      document.getElementById("prHighlighted").checked  = highlighted;
      document.getElementById("savePricingBtn").innerHTML='<i class="fa-solid fa-floppy-disk mr-2"></i>Update Tier';
      document.getElementById("cancelEditPricing").classList.remove("hidden");
      document.getElementById("pricingForm").scrollIntoView({behavior:"smooth"});
    };
    window.cancelPricingEdit = () => clearPricingForm();

    function clearPricingForm() {
      ["editPricingId","prTier","prName","prSubtitle","prPrice","prPeriod","prFeatures","prCtaLabel","prCtaUrl"].forEach(id=>document.getElementById(id).value="");
      document.getElementById("prHighlighted").checked=false;
      document.getElementById("savePricingBtn").innerHTML='<i class="fa-solid fa-plus mr-2"></i>Add Tier';
      document.getElementById("cancelEditPricing").classList.add("hidden");
    }

    window.deletePricingItem = async (id) => {
      if (!confirm("Delete this pricing tier?")) return;
      try { await deleteDoc(doc(db,"pricing",id)); showToast("Deleted.","success"); loadAdminPricing(); loadPublicPricing(); }
      catch (e) { showToast("Error: "+e.message,"error"); }
    };

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       ADMIN ‚Äî USERS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    async function loadAdminUsers() {
      const list = document.getElementById("adminUserList");
      if (!list) return;
      list.innerHTML = `<div class="flex justify-center py-10"><div class="spinner"></div></div>`;
      try {
        const snap = await getDocs(collection(db,"users"));
        const users = snap.docs.map(d=>({id:d.id,...d.data()}));
        const el = document.getElementById("statUsers"); if(el) el.textContent=users.length;
        if (!users.length){list.innerHTML=`<p class="text-center text-gray-600 py-10 text-sm">No users yet.</p>`;return;}
        list.innerHTML = users.map(u=>{
          const joined=u.joinedAt?.toDate?u.joinedAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"‚Äî";
          const name=u.customDisplayName||u.displayName||"Player";
          const photo=u.customPhotoURL||u.photoURL||"";
          return `<div class="glass-card rounded-xl p-4 flex flex-col sm:flex-row sm:items-center gap-4">
            <img src="${escHtml(photo)}" alt="" class="w-12 h-12 rounded-xl object-cover flex-shrink-0 bg-purple-900/40"
              onerror="this.src='https://placehold.co/48x48/1a0033/bf00ff?text=U'"/>
            <div class="flex-1 min-w-0">
              <p class="font-bebas text-white text-lg tracking-wider truncate">${escHtml(name)}</p>
              <p class="font-mono text-xs text-purple-400 truncate">${escHtml(u.email||"")}</p>
              <p class="font-poppins text-xs text-gray-600 mt-0.5">Joined: ${joined}</p>
            </div>
            <div class="flex items-center gap-3 flex-shrink-0">
              <div class="text-center glass rounded-lg px-4 py-2">
                <p class="font-bebas text-2xl text-purple-300">${u.paid_works_count??0}</p>
                <p class="font-mono text-xs text-gray-600 uppercase tracking-wider">Works</p>
              </div>
              <button onclick="openUpdateWorksModal('${u.id}','${escAttr(name)}',${u.paid_works_count??0})"
                class="btn-icon text-green-400 hover:text-green-300" title="Update Paid Works">
                <i class="fa-solid fa-trophy text-xs"></i>
              </button>
            </div>
          </div>`;
        }).join("");
      } catch(e){list.innerHTML=`<p class="text-center text-red-400 py-10 text-sm">Error: ${e.message}</p>`;}
    }
    window.loadAdminUsers = loadAdminUsers;

    window.openUpdateWorksModal = (uid,name,current) => {
      document.getElementById("uwModalTitle").textContent=`Update Works ‚Äî ${name}`;
      document.getElementById("uwUserId").value=uid;
      document.getElementById("uwWorksCount").value=current;
      document.getElementById("updateWorksModal").classList.remove("hidden");
      document.getElementById("updateWorksModal").classList.add("flex");
    };
    window.closeUpdateWorksModal = () => {
      document.getElementById("updateWorksModal").classList.add("hidden");
      document.getElementById("updateWorksModal").classList.remove("flex");
    };
    window.saveUserWorks = async () => {
      const uid=document.getElementById("uwUserId").value;
      const count=parseInt(document.getElementById("uwWorksCount").value);
      if(isNaN(count)||count<0){showToast("Enter a valid number.","error");return;}
      setBtnLoading("saveWorksBtn",true);
      try{await updateDoc(doc(db,"users",uid),{paid_works_count:count});showToast("Updated! ‚úì","success");closeUpdateWorksModal();loadAdminUsers();}
      catch(e){showToast("Error: "+e.message,"error");}
      setBtnLoading("saveWorksBtn",false);
    };

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       LIGHTBOX
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    window.openLightbox = (src,title,desc) => {
      document.getElementById("lbImg").src=src;
      document.getElementById("lbTitle").textContent=title;
      document.getElementById("lbDesc").textContent=desc;
      document.getElementById("lightbox").classList.remove("hidden");
      document.getElementById("lightbox").classList.add("flex");
      document.body.style.overflow="hidden";
    };
    window.closeLightbox = () => {
      document.getElementById("lightbox").classList.add("hidden");
      document.getElementById("lightbox").classList.remove("flex");
      document.body.style.overflow="";
    };

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       HELPERS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    function showToast(msg,type="info"){
      const t=document.getElementById("toast");
      const icon={success:"fa-circle-check",error:"fa-circle-xmark",info:"fa-circle-info"};
      const col={success:"border-green-500/40 text-green-300",error:"border-red-500/40 text-red-300",info:"border-purple-500/40 text-purple-300"};
      t.className=`toast-base glass border ${col[type]}`;
      t.querySelector("#toastIcon").className=`fa-solid ${icon[type]} text-sm flex-shrink-0`;
      t.querySelector("#toastMsg").textContent=msg;
      t.classList.remove("toast-hidden"); t.classList.add("toast-show");
      clearTimeout(window._toastTimer);
      window._toastTimer=setTimeout(()=>{t.classList.remove("toast-show");t.classList.add("toast-hidden");},3800);
    }
    function setBtnLoading(id,on){const b=document.getElementById(id);if(!b)return;b.disabled=on;b.style.opacity=on?"0.6":"1";}
    function escHtml(s){return String(s||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");}
    function escAttr(s){return String(s||"").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/\n/g,"\\n");}

    document.addEventListener("DOMContentLoaded",()=>{
      loadSiteSettings();
      showView("public");
      document.addEventListener("keydown",e=>{
        if(e.key==="Escape"){closeLightbox();closeUpdateWorksModal();closeOrderModal();closeOrderChoice();}
      });
    });
  </script>

  <style>
    :root{--neon:#bf00ff;--glow:#d966ff;--mid:#7b00cc;--bg:#060609;}
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
    html{scroll-behavior:smooth;}
    body{background-color:var(--bg);font-family:"Poppins",sans-serif;color:#e0d8f0;overflow-x:hidden;}
    body::before{content:"";position:fixed;inset:0;z-index:0;pointer-events:none;
      background:radial-gradient(ellipse 80% 50% at 15% 5%,rgba(123,0,204,.15) 0%,transparent 55%),
                 radial-gradient(ellipse 60% 40% at 85% 90%,rgba(191,0,255,.10) 0%,transparent 50%);}
    body::after{content:"";position:fixed;inset:0;z-index:0;pointer-events:none;opacity:.4;
      background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.025'/%3E%3C/svg%3E");}
    .font-bebas{font-family:"Bebas Neue",sans-serif;}
    .font-mono{font-family:"DM Mono",monospace;}

    .glass{background:rgba(255,255,255,.04);backdrop-filter:blur(24px) saturate(180%);-webkit-backdrop-filter:blur(24px) saturate(180%);border:1px solid rgba(191,0,255,.18);box-shadow:0 8px 32px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.06);}
    .glass-card{background:rgba(255,255,255,.03);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(191,0,255,.2);box-shadow:0 4px 20px rgba(0,0,0,.3),inset 0 1px 0 rgba(255,255,255,.05);transition:all .35s cubic-bezier(.23,1,.32,1);}
    .glass-card:hover{border-color:rgba(191,0,255,.48);box-shadow:0 8px 40px rgba(191,0,255,.2),inset 0 1px 0 rgba(255,255,255,.1);transform:translateY(-4px);}
    .pricing-highlight{border-color:rgba(191,0,255,.6)!important;box-shadow:0 0 30px rgba(191,0,255,.25),0 8px 40px rgba(191,0,255,.15),inset 0 1px 0 rgba(255,255,255,.1)!important;}
    .navbar-glass{background:rgba(6,6,9,.78);backdrop-filter:blur(32px);-webkit-backdrop-filter:blur(32px);border-bottom:1px solid rgba(191,0,255,.14);}
    .btn-liquid{position:relative;overflow:hidden;cursor:pointer;background:rgba(191,0,255,.1);backdrop-filter:blur(16px);border:1px solid rgba(191,0,255,.44);box-shadow:0 0 16px rgba(191,0,255,.22),inset 0 1px 0 rgba(255,255,255,.1);transition:all .3s cubic-bezier(.23,1,.32,1);}
    .btn-liquid::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent);transition:left .5s ease;}
    .btn-liquid:hover::before{left:100%;}
    .btn-liquid:hover{background:rgba(191,0,255,.22);border-color:rgba(217,102,255,.7);box-shadow:0 0 30px rgba(191,0,255,.42),inset 0 1px 0 rgba(255,255,255,.16);transform:translateY(-1px);}
    .btn-purple{background:linear-gradient(135deg,#7b00cc,#bf00ff);border:1px solid rgba(217,102,255,.4);box-shadow:0 4px 20px rgba(191,0,255,.35);transition:all .3s ease;cursor:pointer;}
    .btn-purple:hover{box-shadow:0 4px 32px rgba(191,0,255,.55);transform:translateY(-1px);}
    .btn-icon{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:8px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);cursor:pointer;transition:all .2s ease;}
    .btn-icon:hover{background:rgba(255,255,255,.09);}
    .view{display:none;}.active-view{display:block;}
    .dash-section{display:none;}.active-dash{display:block;}
    .tab-active{background:rgba(191,0,255,.15)!important;border-color:rgba(191,0,255,.5)!important;color:#d966ff!important;}
    .gfx-input{width:100%;background:rgba(255,255,255,.04);border:1px solid rgba(191,0,255,.2);border-radius:10px;padding:10px 14px;color:#e0d8f0;font-family:"Poppins",sans-serif;font-size:.875rem;outline:none;transition:border-color .2s,box-shadow .2s;}
    .gfx-input:focus{border-color:rgba(191,0,255,.55);box-shadow:0 0 0 3px rgba(191,0,255,.1);}
    .gfx-input::placeholder{color:rgba(200,180,220,.3);}
    select.gfx-input option{background:#1a0033;color:#e0d8f0;}
    textarea.gfx-input{resize:vertical;}
    .gfx-label{display:block;font-family:"DM Mono",monospace;font-size:.63rem;letter-spacing:.15em;text-transform:uppercase;color:rgba(217,102,255,.7);margin-bottom:6px;}
    .badge{font-family:"DM Mono",monospace;font-size:.6rem;letter-spacing:.12em;text-transform:uppercase;padding:2px 8px;border-radius:4px;background:rgba(191,0,255,.15);border:1px solid rgba(191,0,255,.35);color:var(--glow);}
    .status-pill{font-family:"DM Mono",monospace;font-size:.65rem;letter-spacing:.1em;text-transform:uppercase;padding:3px 10px;border-radius:99px;border-width:1px;border-style:solid;}
    .progress-track{width:100%;height:10px;background:rgba(255,255,255,.06);border:1px solid rgba(191,0,255,.12);border-radius:99px;overflow:hidden;}
    .progress-fill{height:100%;border-radius:99px;background:linear-gradient(90deg,#7b00cc,#bf00ff,#d966ff);box-shadow:0 0 10px rgba(191,0,255,.5);animation:fillBar 1.2s cubic-bezier(.23,1,.32,1) forwards;}
    @keyframes fillBar{from{width:0}to{width:var(--pct)}}
    .spinner{width:36px;height:36px;border:3px solid rgba(191,0,255,.15);border-top-color:var(--neon);border-radius:50%;animation:spin .8s linear infinite;}
    @keyframes spin{to{transform:rotate(360deg)}}
    .neon-text{text-shadow:0 0 20px var(--neon),0 0 50px var(--mid);}
    @keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
    .shimmer-text{background:linear-gradient(90deg,#fff 0%,var(--glow) 40%,#fff 60%,var(--glow) 100%);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:shimmer 4s linear infinite;}
    .glow-dot{width:8px;height:8px;border-radius:50%;background:var(--neon);box-shadow:0 0 6px var(--neon),0 0 12px var(--neon);animation:pulseDot 2s ease-in-out infinite;}
    @keyframes pulseDot{0%,100%{opacity:1}50%{opacity:.4}}
    @keyframes pulseGlow{0%,100%{box-shadow:0 0 18px rgba(191,0,255,.3)}50%{box-shadow:0 0 40px rgba(191,0,255,.65),0 0 80px rgba(191,0,255,.2)}}
    .pulse-glow{animation:pulseGlow 3s ease-in-out infinite;}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
    .float{animation:float 4s ease-in-out infinite;}
    .scanline{position:absolute;inset:0;pointer-events:none;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(191,0,255,.012) 2px,rgba(191,0,255,.012) 4px);}
    .avatar-ring{box-shadow:0 0 0 3px #bf00ff,0 0 20px rgba(191,0,255,.5);}
    .stat-card-glow{box-shadow:0 0 24px rgba(191,0,255,.12),inset 0 1px 0 rgba(255,255,255,.07);}
    /* File upload drop zone */
    .upload-zone{border:2px dashed rgba(191,0,255,.3);border-radius:12px;padding:20px;text-align:center;cursor:pointer;transition:all .2s ease;background:rgba(191,0,255,.04);}
    .upload-zone:hover{border-color:rgba(191,0,255,.6);background:rgba(191,0,255,.08);}
    .toast-base{position:fixed;bottom:24px;right:24px;z-index:9999;min-width:280px;max-width:360px;padding:14px 18px;border-radius:14px;font-family:"Poppins",sans-serif;font-size:.8rem;backdrop-filter:blur(24px);display:flex;align-items:center;gap:10px;transition:all .4s cubic-bezier(.23,1,.32,1);}
    .toast-hidden{opacity:0;transform:translateY(20px);pointer-events:none;}
    .toast-show{opacity:1;transform:translateY(0);}
    #mobileMenu{display:none;}
    #mobileMenu.open{display:flex;}
    .section-tag{font-family:"DM Mono",monospace;font-size:.68rem;letter-spacing:.3em;text-transform:uppercase;color:var(--glow);opacity:.7;}
    .line-clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
    #lightbox,#updateWorksModal,#orderModal,#orderChoiceModal{position:fixed;inset:0;z-index:10000;background:rgba(0,0,0,.85);backdrop-filter:blur(8px);align-items:center;justify-content:center;padding:20px;}
    /* Beautiful close button */
    .btn-close{width:38px;height:38px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);cursor:pointer;transition:all .2s ease;color:#9ca3af;}
    .btn-close:hover{background:rgba(239,68,68,.15);border-color:rgba(239,68,68,.4);color:#f87171;transform:scale(1.05);}
    /* Beautiful back button */
    .btn-back{display:inline-flex;align-items:center;gap:8px;padding:8px 18px;border-radius:12px;background:rgba(255,255,255,.05);border:1px solid rgba(191,0,255,.25);color:#9ca3af;font-family:"Poppins",sans-serif;font-size:.75rem;font-weight:500;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;transition:all .25s ease;}
    .btn-back:hover{background:rgba(191,0,255,.12);border-color:rgba(191,0,255,.5);color:#d966ff;transform:translateX(-2px);}
    .btn-back i{transition:transform .25s ease;}
    .btn-back:hover i{transform:translateX(-3px);}
    /* Order choice cards */
    .order-choice-card{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:28px 20px;border-radius:20px;cursor:pointer;border:1px solid;transition:all .3s cubic-bezier(.23,1,.32,1);text-align:center;}
    .order-choice-card:hover{transform:translateY(-4px);}
    .order-choice-wa{background:rgba(37,211,102,.08);border-color:rgba(37,211,102,.3);}
    .order-choice-wa:hover{background:rgba(37,211,102,.16);border-color:rgba(37,211,102,.6);box-shadow:0 8px 30px rgba(37,211,102,.2);}
    .order-choice-web{background:rgba(191,0,255,.08);border-color:rgba(191,0,255,.3);}
    .order-choice-web:hover{background:rgba(191,0,255,.16);border-color:rgba(191,0,255,.6);box-shadow:0 8px 30px rgba(191,0,255,.2);}
    ::-webkit-scrollbar{width:4px;}::-webkit-scrollbar-track{background:var(--bg);}::-webkit-scrollbar-thumb{background:var(--mid);border-radius:4px;}
    section[id]{scroll-margin-top:80px;}
  </style>
</head>
<body>

<!-- TOAST -->
<div id="toast" class="toast-base toast-hidden glass border border-purple-500/40 text-purple-300">
  <i id="toastIcon" class="fa-solid fa-circle-info text-sm flex-shrink-0"></i>
  <span id="toastMsg"></span>
</div>

<!-- LIGHTBOX -->
<div id="lightbox" class="hidden" onclick="if(event.target===this)closeLightbox()">
  <div class="glass rounded-2xl overflow-hidden max-w-3xl w-full relative">
    <button onclick="closeLightbox()" class="btn-close absolute top-4 right-4 z-10">
      <i class="fa-solid fa-xmark"></i>
    </button>
    <img id="lbImg" src="" alt="" class="w-full max-h-[65vh] object-contain bg-black"/>
    <div class="p-6">
      <h3 id="lbTitle" class="font-bebas text-2xl text-white tracking-wider"></h3>
      <p id="lbDesc" class="font-poppins text-gray-400 text-sm mt-2"></p>
    </div>
  </div>
</div>

<!-- UPDATE WORKS MODAL -->
<div id="updateWorksModal" class="hidden" onclick="if(event.target===this)closeUpdateWorksModal()">
  <div class="glass rounded-2xl p-8 max-w-sm w-full">
    <div class="flex items-center justify-between mb-6">
      <h3 id="uwModalTitle" class="font-bebas text-2xl text-white tracking-wider"></h3>
      <button onclick="closeUpdateWorksModal()" class="btn-close"><i class="fa-solid fa-xmark text-xs"></i></button>
    </div>
    <input type="hidden" id="uwUserId"/>
    <div class="mb-6">
      <label class="gfx-label">Total Paid Works Completed</label>
      <input id="uwWorksCount" type="number" min="0" class="gfx-input" placeholder="0"/>
    </div>
    <button id="saveWorksBtn" onclick="saveUserWorks()"
      class="btn-purple w-full py-3 rounded-xl font-poppins font-semibold text-sm text-white flex items-center justify-center gap-2">
      <i class="fa-solid fa-trophy mr-1"></i> Save Works Count
    </button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ORDER CHOICE MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="orderChoiceModal" class="hidden" onclick="if(event.target===this)closeOrderChoice()">
  <div class="glass rounded-3xl p-8 max-w-sm w-full relative">
    <button onclick="closeOrderChoice()" class="btn-close absolute top-5 right-5">
      <i class="fa-solid fa-xmark"></i>
    </button>
    <input type="hidden" id="choiceDesign"/>
    <div class="text-center mb-7">
      <div class="w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-4"
           style="background:rgba(191,0,255,.15);border:1px solid rgba(191,0,255,.4)">
        <i class="fa-solid fa-bag-shopping text-purple-400 text-xl"></i>
      </div>
      <h2 class="font-bebas text-3xl text-white tracking-wider">ORDER NOW</h2>
      <p id="choiceTitle" class="font-mono text-sm text-purple-400 mt-1 truncate"></p>
      <p class="font-poppins text-gray-500 text-xs mt-2">How would you like to place your order?</p>
    </div>
    <div class="grid grid-cols-2 gap-4">
      <button onclick="chooseWhatsApp()" class="order-choice-card order-choice-wa">
        <div class="w-12 h-12 rounded-xl flex items-center justify-center"
             style="background:rgba(37,211,102,.15);border:1px solid rgba(37,211,102,.3)">
          <i class="fa-brands fa-whatsapp text-green-400 text-2xl"></i>
        </div>
        <p class="font-bebas text-white text-lg tracking-wider">WhatsApp</p>
        <p class="font-poppins text-gray-500 text-xs">Quick & direct chat</p>
      </button>
      <button onclick="chooseWebOrder()" class="order-choice-card order-choice-web">
        <div class="w-12 h-12 rounded-xl flex items-center justify-center"
             style="background:rgba(191,0,255,.15);border:1px solid rgba(191,0,255,.3)">
          <i class="fa-solid fa-globe text-purple-400 text-2xl"></i>
        </div>
        <p class="font-bebas text-white text-lg tracking-wider">Order Form</p>
        <p class="font-poppins text-gray-500 text-xs">Fill in your details</p>
      </button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê WEB ORDER FORM MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="orderModal" class="hidden" onclick="if(event.target===this)closeOrderModal()">
  <div class="glass rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto relative">
    <!-- Header -->
    <div class="sticky top-0 glass-card rounded-t-3xl px-7 py-5 flex items-center justify-between z-10"
         style="border-bottom:1px solid rgba(191,0,255,.2)">
      <div>
        <h2 class="font-bebas text-2xl text-white tracking-wider flex items-center gap-2">
          <i class="fa-solid fa-pen-to-square text-purple-400"></i> PLACE ORDER
        </h2>
        <p id="orderDesignTitle" class="font-mono text-xs text-purple-400 truncate max-w-xs"></p>
      </div>
      <button onclick="closeOrderModal()" class="btn-close flex-shrink-0">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="p-7">
      <!-- Success State -->
      <div id="orderSuccess" class="hidden text-center py-8">
        <div class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-5"
             style="background:rgba(34,197,94,.15);border:2px solid rgba(34,197,94,.4);box-shadow:0 0 30px rgba(34,197,94,.2)">
          <i class="fa-solid fa-check text-green-400 text-3xl"></i>
        </div>
        <h3 class="font-bebas text-3xl text-white tracking-wider mb-2">ORDER SENT!</h3>
        <p class="font-poppins text-gray-400 text-sm mb-1">Your order has been received.</p>
        <p class="font-poppins text-gray-500 text-xs">We'll contact you at your email within 24 hours. üî•</p>
        <button onclick="closeOrderModal()" class="btn-back mt-6 mx-auto">
          <i class="fa-solid fa-arrow-left"></i> Back to Armory
        </button>
      </div>

      <!-- Form -->
      <div id="orderFormInner">
        <input type="hidden" id="orderDesignRef"/>
        <div class="flex flex-col gap-4">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label class="gfx-label">Your Name *</label>
              <input id="orderName" type="text" class="gfx-input" placeholder="e.g. GarenFire"/>
            </div>
            <div>
              <label class="gfx-label">Email *</label>
              <input id="orderEmail" type="email" class="gfx-input" placeholder="you@gmail.com"/>
            </div>
          </div>
          <div>
            <label class="gfx-label">Phone / Discord / WhatsApp</label>
            <input id="orderPhone" type="text" class="gfx-input" placeholder="e.g. +94771234567 or DiscordUser#1234"/>
          </div>
          <div>
            <label class="gfx-label">Order Description *</label>
            <textarea id="orderDesc" class="gfx-input" rows="4"
              placeholder="Describe what you want... (colors, style, text, references etc.)"></textarea>
          </div>
          <div>
            <label class="gfx-label">Budget (optional)</label>
            <input id="orderBudget" type="text" class="gfx-input" placeholder="e.g. ‚Çπ200 or open to suggestions"/>
          </div>

          <!-- Privacy note -->
          <div class="flex items-start gap-3 p-3 rounded-xl"
               style="background:rgba(191,0,255,.06);border:1px solid rgba(191,0,255,.15)">
            <i class="fa-solid fa-shield-halved text-purple-500 text-xs mt-0.5 flex-shrink-0"></i>
            <p class="font-poppins text-xs text-gray-500 leading-relaxed">
              Your order will be sent to <strong class="text-purple-400">lokayafx@gmail.com</strong> and saved securely. We'll reply within 24 hours.
            </p>
          </div>

          <div class="flex gap-3 pt-2">
            <button onclick="closeOrderModal()" class="btn-back flex-shrink-0">
              <i class="fa-solid fa-arrow-left"></i> Back
            </button>
            <button id="submitOrderBtn" onclick="submitWebOrder()"
              class="btn-purple flex-1 py-3.5 rounded-xl font-poppins font-bold text-sm text-white flex items-center justify-center gap-2">
              <i class="fa-solid fa-paper-plane"></i> Send Order
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<nav class="navbar-glass fixed top-0 left-0 right-0 z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 flex items-center justify-between h-16">
    <button onclick="showView('public')" class="flex items-center gap-2 focus:outline-none">
      <div class="w-8 h-8 rounded-lg glass flex items-center justify-center pulse-glow" id="navLogoIcon">
        <i class="fa-solid fa-fire text-purple-400 text-sm"></i>
      </div>
      <img src="" alt="LOKAYA GFX" class="site-logo-img hidden h-9 w-auto object-contain"/>
      <span class="font-bebas text-white text-xl tracking-widest" id="navLogoText">LOKAYA<span class="text-purple-400">GFX</span></span>
    </button>
    <div class="hidden md:flex items-center gap-5">
      <a href="#armory" class="font-poppins text-xs font-medium tracking-widest uppercase text-gray-400 hover:text-purple-300 transition-colors">Armory</a>
      <a href="#vault-section" class="font-poppins text-xs font-medium tracking-widest uppercase text-gray-400 hover:text-purple-300 transition-colors">Vault</a>
      <a href="#pricing-section" class="font-poppins text-xs font-medium tracking-widest uppercase text-gray-400 hover:text-purple-300 transition-colors">Pricing</a>
      <button id="navProfileBtn" onclick="showView('profile')"
        class="hidden btn-liquid px-4 py-2 rounded-lg font-poppins font-semibold text-xs tracking-wider text-purple-300 uppercase flex items-center gap-2">
        <i class="fa-solid fa-user text-xs"></i> My Profile
      </button>
      <button id="navAdminBtn" onclick="showView('dashboard')"
        class="hidden btn-liquid px-4 py-2 rounded-lg font-poppins font-semibold text-xs tracking-wider text-purple-300 uppercase flex items-center gap-2">
        <i class="fa-solid fa-gauge-high text-xs"></i> Dashboard
      </button>
      <button id="navLoginBtn" onclick="loginWithGoogle()"
        class="btn-liquid px-4 py-2 rounded-lg font-poppins font-semibold text-xs tracking-wider text-purple-300 uppercase flex items-center gap-2">
        <i class="fa-brands fa-google text-xs"></i> Sign In
      </button>
      <button id="navLogoutBtn" onclick="logoutUser()"
        class="hidden btn-icon text-gray-500 hover:text-red-400" title="Sign Out">
        <i class="fa-solid fa-right-from-bracket text-xs"></i>
      </button>
    </div>
    <button class="md:hidden text-purple-300 text-lg" onclick="document.getElementById('mobileMenu').classList.toggle('open')">
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>
  <div id="mobileMenu" class="flex-col gap-3 px-4 pb-4 md:hidden border-t border-purple-900/20">
    <a href="#armory" onclick="document.getElementById('mobileMenu').classList.remove('open')" class="font-poppins text-xs uppercase tracking-widest text-gray-400 py-1">Armory</a>
    <a href="#vault-section" onclick="document.getElementById('mobileMenu').classList.remove('open')" class="font-poppins text-xs uppercase tracking-widest text-gray-400 py-1">Vault</a>
    <a href="#pricing-section" onclick="document.getElementById('mobileMenu').classList.remove('open')" class="font-poppins text-xs uppercase tracking-widest text-gray-400 py-1">Pricing</a>
    <button id="mNavProfileBtn" onclick="showView('profile');document.getElementById('mobileMenu').classList.remove('open')"
      class="hidden btn-liquid px-4 py-2 rounded-lg font-poppins text-xs text-purple-300 uppercase text-left flex items-center gap-2">
      <i class="fa-solid fa-user"></i> My Profile
    </button>
    <button id="mNavAdminBtn" onclick="showView('dashboard');document.getElementById('mobileMenu').classList.remove('open')"
      class="hidden btn-liquid px-4 py-2 rounded-lg font-poppins text-xs text-purple-300 uppercase text-left flex items-center gap-2">
      <i class="fa-solid fa-gauge-high"></i> Dashboard
    </button>
    <button id="mNavLoginBtn" onclick="loginWithGoogle()"
      class="btn-liquid px-4 py-2 rounded-lg font-poppins text-xs text-purple-300 uppercase text-left flex items-center gap-2">
      <i class="fa-brands fa-google"></i> Sign In with Google
    </button>
    <button id="mNavLogoutBtn" onclick="logoutUser()"
      class="hidden btn-liquid px-4 py-2 rounded-lg font-poppins text-xs text-red-400 uppercase text-left flex items-center gap-2">
      <i class="fa-solid fa-right-from-bracket"></i> Sign Out
    </button>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     PUBLIC VIEW
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="public" class="view">

  <!-- HERO -->
  <section class="relative min-h-screen flex items-center pt-16 overflow-hidden px-4 sm:px-6">
    <div class="scanline"></div>
    <div class="absolute top-24 left-1/4 w-80 h-80 rounded-full opacity-20 blur-3xl pointer-events-none" style="background:radial-gradient(circle,#bf00ff,transparent)"></div>
    <div class="absolute bottom-24 right-1/4 w-56 h-56 rounded-full opacity-10 blur-3xl pointer-events-none" style="background:radial-gradient(circle,#7b00cc,transparent)"></div>
    <div class="max-w-7xl mx-auto w-full py-20 grid md:grid-cols-2 gap-12 items-center relative z-10">
      <div>
        <p class="section-tag mb-5">‚ö° Free Fire Design Studio</p>
        <h1 class="font-bebas leading-none mb-6" style="font-size:clamp(4.5rem,10vw,7rem)">
          <span class="block text-white">LEVEL UP</span>
          <span class="block shimmer-text">YOUR</span>
          <span class="block text-white neon-text">IDENTITY</span>
        </h1>
        <p class="font-poppins text-gray-400 text-sm max-w-md mb-10 leading-relaxed">
          Premium Free Fire logos, banners &amp; overlays ‚Äî crafted for squads that demand elite visual presence.
        </p>
        <div class="flex flex-wrap gap-4 items-center">
          <a href="https://lokayagfx.netlify.app/" target="_blank"
            class="btn-liquid px-8 py-4 rounded-xl font-poppins font-bold text-sm text-white uppercase tracking-wider flex items-center gap-2 pulse-glow">
            üî• GET FREE LOGOS
          </a>
          <a href="#armory" class="font-poppins text-xs text-gray-500 hover:text-purple-300 transition-colors uppercase tracking-wider flex items-center gap-2">
            View Armory <i class="fa-solid fa-arrow-right text-xs"></i>
          </a>
        </div>
        <div class="grid grid-cols-3 gap-3 mt-14">
          <div class="glass rounded-xl p-4 text-center"><p class="font-bebas text-3xl text-purple-300">500+</p><p class="font-mono text-xs text-gray-600 uppercase tracking-wider mt-1">Designs</p></div>
          <div class="glass rounded-xl p-4 text-center"><p class="font-bebas text-3xl text-purple-300">200+</p><p class="font-mono text-xs text-gray-600 uppercase tracking-wider mt-1">Clients</p></div>
          <div class="glass rounded-xl p-4 text-center"><p class="font-bebas text-3xl text-purple-300">4.9‚òÖ</p><p class="font-mono text-xs text-gray-600 uppercase tracking-wider mt-1">Rating</p></div>
        </div>
      </div>
      <div class="flex justify-center">
        <div class="float">
          <div class="glass rounded-2xl w-72 h-72 sm:w-80 sm:h-80 flex items-center justify-center relative overflow-hidden" style="background:rgba(191,0,255,.05)">
            <div class="absolute inset-0 rounded-2xl" style="background:radial-gradient(circle at 50% 30%,rgba(191,0,255,.18),transparent 60%)"></div>
            <div class="relative z-10 text-center">
              <div class="text-9xl mb-3" style="filter:drop-shadow(0 0 30px #bf00ff) drop-shadow(0 0 60px #7b00cc)">üî•</div>
              <p class="font-bebas text-xl text-white tracking-widest">LOKAYA GFX</p>
              <p class="font-mono text-xs text-purple-400 mt-1 tracking-widest">ELITE DESIGN STUDIO</p>
            </div>
            <div class="absolute top-3 left-3 w-5 h-5 border-t border-l border-purple-500 opacity-60"></div>
            <div class="absolute top-3 right-3 w-5 h-5 border-t border-r border-purple-500 opacity-60"></div>
            <div class="absolute bottom-3 left-3 w-5 h-5 border-b border-l border-purple-500 opacity-60"></div>
            <div class="absolute bottom-3 right-3 w-5 h-5 border-b border-r border-purple-500 opacity-60"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ARMORY -->
  <section id="armory" class="py-24 max-w-7xl mx-auto px-4 sm:px-6 relative z-10" style="scroll-margin-top:80px">
    <div class="text-center mb-14">
      <p class="section-tag mb-3">‚Äî Portfolio ‚Äî</p>
      <h2 class="font-bebas text-5xl sm:text-6xl text-white">THE <span class="shimmer-text">ARMORY</span></h2>
      <p class="font-poppins text-gray-500 text-sm mt-3">Weapons of visual warfare</p>
    </div>
    <div id="portfolioGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <div class="col-span-full flex justify-center py-16"><div class="spinner"></div></div>
    </div>
  </section>

  <!-- LIVE STATUS -->
  <section id="status-section" class="py-24 relative" style="scroll-margin-top:80px">
    <div class="absolute inset-0 pointer-events-none opacity-5" style="background:radial-gradient(ellipse 60% 60% at 80% 50%,#bf00ff,transparent)"></div>
    <div class="max-w-4xl mx-auto px-4 sm:px-6 relative z-10">
      <div class="text-center mb-14">
        <p class="section-tag mb-3">‚Äî Live Updates ‚Äî</p>
        <h2 class="font-bebas text-5xl sm:text-6xl text-white">ACTIVE <span class="shimmer-text">PROJECTS</span></h2>
        <p class="font-poppins text-gray-500 text-sm mt-3">Real-time mission status</p>
      </div>
      <div class="glass-card rounded-2xl p-6 sm:p-8">
        <div class="flex items-center justify-between mb-8">
          <div class="flex items-center gap-2"><div class="glow-dot"></div><span class="font-mono text-xs text-purple-400 uppercase tracking-widest">System Online</span></div>
          <span class="badge">Live</span>
        </div>
        <div id="statusContainer" class="flex flex-col gap-5">
          <div class="flex justify-center py-10"><div class="spinner"></div></div>
        </div>
      </div>
    </div>
  </section>

  <!-- EDITORS VAULT -->
  <section id="vault-section" class="py-24 relative" style="scroll-margin-top:80px">
    <div class="absolute inset-0 pointer-events-none opacity-5" style="background:radial-gradient(ellipse 70% 50% at 20% 60%,#bf00ff,transparent)"></div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 relative z-10">
      <div class="text-center mb-14">
        <p class="section-tag mb-3">‚Äî Free Resources ‚Äî</p>
        <h2 class="font-bebas text-5xl sm:text-6xl text-white">EDITORS <span class="shimmer-text">VAULT</span></h2>
        <p class="font-poppins text-gray-500 text-sm mt-3">Free packs for the community ‚Äî download &amp; elevate your game</p>
      </div>
      <div id="vaultGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="col-span-full flex justify-center py-10"><div class="spinner"></div></div>
      </div>
    </div>
  </section>

  <!-- PRICING -->
  <section id="pricing-section" class="py-24 relative" style="scroll-margin-top:80px">
    <div class="absolute inset-0 pointer-events-none opacity-5" style="background:radial-gradient(ellipse 60% 60% at 70% 40%,#bf00ff,transparent)"></div>
    <div class="max-w-6xl mx-auto px-4 sm:px-6 relative z-10">
      <div class="text-center mb-14">
        <p class="section-tag mb-3">‚Äî Subscription Plans ‚Äî</p>
        <h2 class="font-bebas text-5xl sm:text-6xl text-white">BUY A <span class="shimmer-text">SUBSCRIPTION</span></h2>
        <p class="font-poppins text-gray-500 text-sm mt-3">Choose your tier. Higher tiers unlock more exclusive benefits.</p>
      </div>
      <div id="pricingGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 items-start">
        <div class="col-span-full flex justify-center py-10"><div class="spinner"></div></div>
      </div>
    </div>
  </section>

  <!-- SIGN IN CTA (hidden when logged in) -->
  <section id="loginCTA" class="py-20 relative z-10">
    <div class="max-w-3xl mx-auto px-4 sm:px-6">
      <div class="glass-card rounded-3xl p-8 sm:p-12 text-center relative overflow-hidden">
        <div class="absolute inset-0 pointer-events-none" style="background:radial-gradient(ellipse 80% 60% at 50% 0%,rgba(191,0,255,.1),transparent)"></div>
        <div class="relative z-10">
          <i class="fa-solid fa-user-astronaut text-purple-400 text-4xl mb-4"></i>
          <h2 class="font-bebas text-4xl sm:text-5xl text-white mb-3">TRACK YOUR <span class="shimmer-text">ORDER</span></h2>
          <p class="font-poppins text-gray-400 text-sm max-w-md mx-auto mb-8">
            Sign in with Google to access your personal profile, track live order progress, and view your completed work history.
          </p>
          <button onclick="loginWithGoogle()"
            class="btn-liquid px-8 py-4 rounded-xl font-poppins font-bold text-sm text-white uppercase tracking-wider inline-flex items-center gap-3 pulse-glow">
            <i class="fa-brands fa-google"></i> Sign In to View Your Orders
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="border-t border-purple-900/25 py-12 px-4 sm:px-6 relative z-10">
    <div class="max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-6">
      <div class="text-center sm:text-left">
        <div class="flex items-center gap-2 justify-center sm:justify-start mb-1">
          <i class="fa-solid fa-fire text-purple-500"></i>
          <span class="font-bebas text-white text-xl tracking-widest">LOKAYA<span class="text-purple-400">GFX</span></span>
        </div>
        <p class="font-poppins text-gray-600 text-xs">Elite Free Fire Design Studio ¬∑ ¬© 2024</p>
      </div>
      <div class="flex items-center gap-3">
        <a href="https://wa.me/your-number" target="_blank" class="w-11 h-11 glass-card rounded-xl flex items-center justify-center hover:border-green-500/60 transition-colors"><i class="fa-brands fa-whatsapp text-green-400"></i></a>
        <a href="https://discord.gg/your-server" target="_blank" class="w-11 h-11 glass-card rounded-xl flex items-center justify-center hover:border-indigo-400/60 transition-colors"><i class="fa-brands fa-discord text-indigo-400"></i></a>
        <a href="#" class="w-11 h-11 glass-card rounded-xl flex items-center justify-center hover:border-pink-400/60 transition-colors"><i class="fa-brands fa-instagram text-pink-400"></i></a>
        <a href="#" class="w-11 h-11 glass-card rounded-xl flex items-center justify-center hover:border-red-400/60 transition-colors"><i class="fa-brands fa-youtube text-red-400"></i></a>
      </div>
    </div>
  </footer>
</div><!-- /public -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     PROFILE VIEW
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="profile" class="view">
  <div class="min-h-screen pt-20 pb-20 px-4 sm:px-6 relative z-10">
    <div class="max-w-4xl mx-auto">
      <button onclick="showView('public')" class="btn-back mb-8 mt-4">
        <i class="fa-solid fa-arrow-left"></i> Back to Site
      </button>

      <!-- Profile Header -->
      <div class="glass-card rounded-3xl p-6 sm:p-8 mb-6 relative overflow-hidden">
        <div class="absolute inset-0 pointer-events-none" style="background:radial-gradient(ellipse 80% 60% at 50% 0%,rgba(191,0,255,.12),transparent 60%)"></div>
        <div class="absolute top-4 left-4 w-8 h-8 border-t-2 border-l-2 border-purple-500/40 rounded-tl-lg"></div>
        <div class="absolute top-4 right-4 w-8 h-8 border-t-2 border-r-2 border-purple-500/40 rounded-tr-lg"></div>
        <div class="absolute bottom-4 left-4 w-8 h-8 border-b-2 border-l-2 border-purple-500/40 rounded-bl-lg"></div>
        <div class="absolute bottom-4 right-4 w-8 h-8 border-b-2 border-r-2 border-purple-500/40 rounded-br-lg"></div>

        <div class="relative z-10 flex flex-col sm:flex-row items-center sm:items-start gap-6">
          <!-- Avatar with upload -->
          <div class="flex-shrink-0 relative">
            <img id="profileAvatar" src="https://placehold.co/100x100/1a0033/bf00ff?text=U" alt="Avatar"
              class="w-24 h-24 sm:w-28 sm:h-28 rounded-2xl object-cover avatar-ring"/>
            <label class="absolute -bottom-2 -right-2 w-8 h-8 rounded-lg flex items-center justify-center cursor-pointer pulse-glow"
                   style="background:linear-gradient(135deg,#7b00cc,#bf00ff)" title="Change photo (max 2MB)">
              <i class="fa-solid fa-camera text-white text-xs"></i>
              <input type="file" accept="image/*" class="hidden" onchange="handleAvatarUpload(this)"/>
            </label>
          </div>

          <!-- Info -->
          <div class="flex-1 text-center sm:text-left">
            <p class="section-tag mb-2">Customer Profile</p>
            <h1 id="profileName" class="font-bebas text-4xl sm:text-5xl text-white tracking-wider leading-none"></h1>
            <p id="profileEmail" class="font-mono text-sm text-purple-400 mt-2"></p>
            <div class="flex items-center justify-center sm:justify-start gap-2 mt-3">
              <div class="glow-dot"></div>
              <span class="font-mono text-xs text-green-400 uppercase tracking-widest">Active Member</span>
            </div>
          </div>

          <button onclick="logoutUser()"
            class="flex-shrink-0 btn-liquid px-4 py-2 rounded-xl font-poppins text-xs text-red-400 uppercase tracking-wider flex items-center gap-2">
            <i class="fa-solid fa-right-from-bracket text-xs"></i> Sign Out
          </button>
        </div>
      </div>

      <!-- Stats -->
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6">
        <div class="glass-card stat-card-glow rounded-2xl p-5 flex flex-col items-center text-center">
          <div class="w-10 h-10 rounded-xl flex items-center justify-center mb-3" style="background:rgba(191,0,255,.15);border:1px solid rgba(191,0,255,.3)">
            <i class="fa-solid fa-calendar-days text-purple-400"></i>
          </div>
          <p class="font-mono text-xs text-gray-600 uppercase tracking-wider mb-1">Member Since</p>
          <p id="profileJoined" class="font-poppins font-semibold text-white text-sm">‚Äî</p>
        </div>
        <div class="glass-card stat-card-glow rounded-2xl p-5 flex flex-col items-center text-center" style="border-color:rgba(191,0,255,.4)">
          <div class="w-10 h-10 rounded-xl flex items-center justify-center mb-3" style="background:rgba(191,0,255,.2);border:1px solid rgba(191,0,255,.5)">
            <i class="fa-solid fa-trophy text-yellow-400"></i>
          </div>
          <p class="font-mono text-xs text-gray-600 uppercase tracking-wider mb-1">Paid Works Done</p>
          <p id="profilePaidWorks" class="font-bebas text-4xl text-purple-300">0</p>
        </div>
        <div class="glass-card stat-card-glow rounded-2xl p-5 flex flex-col items-center text-center">
          <div class="w-10 h-10 rounded-xl flex items-center justify-center mb-3" style="background:rgba(191,0,255,.15);border:1px solid rgba(191,0,255,.3)">
            <i class="fa-solid fa-shield-halved text-purple-400"></i>
          </div>
          <p class="font-mono text-xs text-gray-600 uppercase tracking-wider mb-1">Status</p>
          <p class="font-poppins font-semibold text-green-400 text-sm">Verified</p>
        </div>
      </div>

      <!-- Edit Display Name -->
      <div class="glass-card rounded-2xl p-6 mb-6">
        <h2 class="font-bebas text-2xl text-white tracking-wider mb-5 flex items-center gap-2">
          <i class="fa-solid fa-user-pen text-purple-400"></i> Edit Profile
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="gfx-label">Display Name</label>
            <input id="editDisplayName" type="text" class="gfx-input" placeholder="Your name..."/>
          </div>
          <div class="flex items-end">
            <button id="saveNameBtn" onclick="saveDisplayName()"
              class="btn-purple w-full py-2.5 rounded-xl font-poppins font-semibold text-sm text-white flex items-center justify-center gap-2">
              <i class="fa-solid fa-floppy-disk"></i> Save Name
            </button>
          </div>
        </div>
        <p class="font-poppins text-xs text-gray-600 mt-3">
          <i class="fa-solid fa-camera text-purple-600 mr-1"></i>
          To change your profile picture, click the camera icon on your avatar above. Max 2MB.
        </p>
      </div>

      <!-- My Orders -->
      <div class="glass-card rounded-2xl p-6 sm:p-8">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h2 class="font-bebas text-2xl sm:text-3xl text-white tracking-wider">MY ORDERS</h2>
            <p class="font-mono text-xs text-purple-400 mt-1 tracking-wider">Personal order tracker ‚Äî only you can see this</p>
          </div>
          <button onclick="loadUserOrders()" class="btn-icon text-gray-500 hover:text-purple-300">
            <i class="fa-solid fa-rotate-right text-xs"></i>
          </button>
        </div>
        <div class="flex items-start gap-3 p-4 rounded-xl mb-6" style="background:rgba(191,0,255,.06);border:1px solid rgba(191,0,255,.2)">
          <i class="fa-solid fa-shield-halved text-purple-400 text-sm mt-0.5 flex-shrink-0"></i>
          <p class="font-poppins text-xs text-gray-400 leading-relaxed">
            These orders are <strong class="text-purple-300">private to your account</strong>. Only <strong class="text-purple-300">you</strong> can see your orders here.
          </p>
        </div>
        <div id="userOrdersCont" class="flex flex-col gap-4">
          <div class="flex justify-center py-10"><div class="spinner"></div></div>
        </div>
      </div>
    </div>
  </div>
</div><!-- /profile -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ADMIN DASHBOARD
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="dashboard" class="view">
  <div class="min-h-screen pt-20 pb-16 px-4 sm:px-6 relative z-10">
    <div class="max-w-7xl mx-auto">

      <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8 mt-4">
        <div>
          <p class="section-tag mb-1">Admin Panel</p>
          <h1 class="font-bebas text-4xl sm:text-5xl text-white tracking-wider">COMMAND <span class="text-purple-400">CENTER</span></h1>
        </div>
        <div class="flex items-center gap-3">
          <button onclick="showView('public')" class="btn-back">
            <i class="fa-solid fa-arrow-left"></i> Site
          </button>
          <button onclick="logoutUser()" class="btn-liquid px-4 py-2 rounded-lg font-poppins text-xs text-red-400 uppercase tracking-wider flex items-center gap-2">
            <i class="fa-solid fa-right-from-bracket text-xs"></i> Sign Out
          </button>
        </div>
      </div>

      <!-- Stats -->
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8">
        <div class="glass-card rounded-xl p-5 text-center"><i class="fa-solid fa-images text-purple-400 mb-2 text-lg"></i><p class="font-bebas text-3xl text-white" id="statPortfolio">‚Äî</p><p class="font-mono text-xs text-gray-600 uppercase tracking-wider mt-1">Portfolio</p></div>
        <div class="glass-card rounded-xl p-5 text-center"><i class="fa-solid fa-chart-simple text-purple-400 mb-2 text-lg"></i><p class="font-bebas text-3xl text-white" id="statStatus">‚Äî</p><p class="font-mono text-xs text-gray-600 uppercase tracking-wider mt-1">Projects</p></div>
        <div class="glass-card rounded-xl p-5 text-center"><i class="fa-solid fa-users text-purple-400 mb-2 text-lg"></i><p class="font-bebas text-3xl text-white" id="statUsers">‚Äî</p><p class="font-mono text-xs text-gray-600 uppercase tracking-wider mt-1">Users</p></div>
        <div class="glass-card rounded-xl p-5 text-center"><i class="fa-solid fa-fire text-orange-400 mb-2 text-lg"></i><p class="font-bebas text-3xl text-white">LIVE</p><p class="font-mono text-xs text-gray-600 uppercase tracking-wider mt-1">System</p></div>
      </div>

      <!-- Tabs -->
      <div class="flex flex-wrap gap-3 mb-8">
        <button id="tab-dash" onclick="showDash('dash')" class="dash-tab tab-active btn-liquid px-4 py-2.5 rounded-xl font-poppins font-semibold text-xs uppercase tracking-wider text-purple-300 flex items-center gap-2"><i class="fa-solid fa-images"></i> Portfolio</button>
        <button id="tab-status" onclick="showDash('status')" class="dash-tab btn-liquid px-4 py-2.5 rounded-xl font-poppins font-semibold text-xs uppercase tracking-wider text-gray-400 flex items-center gap-2"><i class="fa-solid fa-chart-simple"></i> Status</button>
        <button id="tab-vault" onclick="showDash('vault')" class="dash-tab btn-liquid px-4 py-2.5 rounded-xl font-poppins font-semibold text-xs uppercase tracking-wider text-gray-400 flex items-center gap-2"><i class="fa-solid fa-box-open"></i> Vault</button>
        <button id="tab-pricing" onclick="showDash('pricing')" class="dash-tab btn-liquid px-4 py-2.5 rounded-xl font-poppins font-semibold text-xs uppercase tracking-wider text-gray-400 flex items-center gap-2"><i class="fa-solid fa-tags"></i> Pricing</button>
        <button id="tab-users" onclick="showDash('users');loadAdminUsers()" class="dash-tab btn-liquid px-4 py-2.5 rounded-xl font-poppins font-semibold text-xs uppercase tracking-wider text-gray-400 flex items-center gap-2"><i class="fa-solid fa-users"></i> Users</button>
        <button id="tab-branding" onclick="showDash('branding')" class="dash-tab btn-liquid px-4 py-2.5 rounded-xl font-poppins font-semibold text-xs uppercase tracking-wider text-gray-400 flex items-center gap-2"><i class="fa-solid fa-palette"></i> Branding</button>
      </div>

      <!-- PORTFOLIO SECTION -->
      <div id="dashSection" class="dash-section">
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
          <div id="portfolioForm" class="lg:col-span-2 glass-card rounded-2xl p-6 h-fit">
            <h2 class="font-bebas text-2xl text-white tracking-wider mb-6 flex items-center gap-2"><i class="fa-solid fa-plus text-purple-400"></i> Add to Armory</h2>
            <input type="hidden" id="editPortfolioId"/>
            <div class="flex flex-col gap-4">
              <div><label class="gfx-label">Title *</label><input id="pTitle" type="text" class="gfx-input" placeholder="e.g. Skull Squad Logo"/></div>
              <div><label class="gfx-label">Description</label><textarea id="pDesc" class="gfx-input" rows="2" placeholder="Short description..."></textarea></div>

              <!-- Image mode toggle -->
              <div>
                <label class="gfx-label">Image Source</label>
                <div class="flex gap-2 mb-3">
                  <button id="imgModeUpload" onclick="togglePortfolioImgMode('upload')"
                    class="tab-active btn-liquid flex-1 py-2 rounded-lg font-poppins text-xs uppercase tracking-wider text-purple-300">
                    <i class="fa-solid fa-upload mr-1"></i> Upload
                  </button>
                  <button id="imgModeUrl" onclick="togglePortfolioImgMode('url')"
                    class="btn-liquid flex-1 py-2 rounded-lg font-poppins text-xs uppercase tracking-wider text-gray-400">
                    <i class="fa-solid fa-link mr-1"></i> URL
                  </button>
                </div>

                <!-- Upload mode -->
                <div id="pImgUploadRow">
                  <label class="upload-zone block cursor-pointer">
                    <i class="fa-solid fa-cloud-arrow-up text-purple-600 text-2xl mb-2"></i>
                    <p class="font-poppins text-xs text-gray-500">Click to select image (max 5MB)</p>
                    <input id="pImgFile" type="file" accept="image/*" class="hidden" onchange="handlePortfolioImageUpload(this)"/>
                  </label>
                  <p id="pImgUploadStatus" class="font-mono text-xs text-gray-600 mt-1"></p>
                </div>

                <!-- URL mode -->
                <div id="pImgUrlRow" class="hidden">
                  <input id="pImg" type="url" class="gfx-input" placeholder="https://i.imgur.com/..."/>
                  <p class="font-poppins text-xs text-gray-700 mt-1">Imgur, imgbb or any direct image link.</p>
                </div>

                <!-- Preview -->
                <img id="pImgPreview" src="" alt="Preview" class="hidden w-full rounded-xl mt-3 object-cover max-h-32"/>
              </div>

              <div>
                <label class="gfx-label">Category</label>
                <select id="pCat" class="gfx-input">
                  <option value="">‚Äî Select ‚Äî</option>
                  <option value="Logo">Logo</option>
                  <option value="Banner">Banner</option>
                  <option value="Thumbnail">Thumbnail</option>
                  <option value="Overlay">Overlay</option>
                  <option value="Clan Kit">Clan Kit</option>
                  <option value="Profile Kit">Profile Kit</option>
                </select>
              </div>
            </div>
            <div class="flex gap-3 mt-6">
              <button id="savePortfolioBtn" onclick="savePortfolioItem()"
                class="btn-purple flex-1 px-4 py-3 rounded-xl font-poppins font-semibold text-xs tracking-wider text-white uppercase flex items-center justify-center">
                <i class="fa-solid fa-plus mr-2"></i>Add to Armory
              </button>
              <button id="cancelEditPortfolio" onclick="cancelPortfolioEdit()" class="hidden btn-liquid px-4 py-3 rounded-xl font-poppins text-xs text-gray-400 uppercase">Cancel</button>
            </div>
          </div>
          <div class="lg:col-span-3 glass-card rounded-2xl p-6">
            <div class="flex items-center justify-between mb-6">
              <h2 class="font-bebas text-2xl text-white tracking-wider flex items-center gap-2"><i class="fa-solid fa-layer-group text-purple-400"></i> Portfolio Items</h2>
              <button onclick="loadDashboardPortfolio()" class="btn-icon text-gray-500 hover:text-purple-300"><i class="fa-solid fa-rotate-right text-xs"></i></button>
            </div>
            <div id="dashPortfolioList" class="flex flex-col gap-3 max-h-[600px] overflow-y-auto pr-1">
              <div class="flex justify-center py-10"><div class="spinner"></div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- STATUS SECTION -->
      <div id="statusSection" class="dash-section">
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
          <div id="statusForm" class="lg:col-span-2 glass-card rounded-2xl p-6 h-fit">
            <h2 class="font-bebas text-2xl text-white tracking-wider mb-6 flex items-center gap-2"><i class="fa-solid fa-plus text-purple-400"></i> Add Status</h2>
            <input type="hidden" id="editStatusId"/>
            <div class="flex flex-col gap-4">
              <div><label class="gfx-label">Client Name *</label><input id="sClient" type="text" class="gfx-input" placeholder="e.g. @GarenFire_YT"/></div>
              <div><label class="gfx-label">Project Title</label><input id="sProject" type="text" class="gfx-input" placeholder="e.g. Squad Logo Design"/></div>
              <div>
                <label class="gfx-label">Customer Email <span class="text-purple-600">(links to profile)</span></label>
                <input id="sCustomerEmail" type="email" class="gfx-input" placeholder="customer@gmail.com"/>
                <p class="font-poppins text-xs text-gray-700 mt-1">Customer sees this order on their profile.</p>
              </div>
              <div>
                <label class="gfx-label">Progress Level</label>
                <select id="sProgress" class="gfx-input">
                  <option value="10">10% ‚Äî Starting</option>
                  <option value="25">25% ‚Äî In Progress</option>
                  <option value="50" selected>50% ‚Äî Halfway</option>
                  <option value="75">75% ‚Äî Almost Done</option>
                  <option value="100">100% ‚Äî Complete ‚úì</option>
                </select>
              </div>
            </div>
            <div class="flex gap-3 mt-6">
              <button id="saveStatusBtn" onclick="saveStatusItem()" class="btn-purple flex-1 px-4 py-3 rounded-xl font-poppins font-semibold text-xs tracking-wider text-white uppercase flex items-center justify-center">
                <i class="fa-solid fa-plus mr-2"></i>Add Status
              </button>
              <button id="cancelEditStatus" onclick="cancelStatusEdit()" class="hidden btn-liquid px-4 py-3 rounded-xl font-poppins text-xs text-gray-400 uppercase">Cancel</button>
            </div>
          </div>
          <div class="lg:col-span-3 glass-card rounded-2xl p-6">
            <div class="flex items-center justify-between mb-6">
              <h2 class="font-bebas text-2xl text-white tracking-wider flex items-center gap-2"><i class="fa-solid fa-chart-simple text-purple-400"></i> Active Projects</h2>
              <button onclick="loadDashboardStatus()" class="btn-icon text-gray-500 hover:text-purple-300"><i class="fa-solid fa-rotate-right text-xs"></i></button>
            </div>
            <div id="dashStatusList" class="flex flex-col gap-3 max-h-[600px] overflow-y-auto pr-1">
              <div class="flex justify-center py-10"><div class="spinner"></div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- VAULT SECTION -->
      <div id="vaultSection" class="dash-section">
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
          <div id="vaultForm" class="lg:col-span-2 glass-card rounded-2xl p-6 h-fit">
            <h2 class="font-bebas text-2xl text-white tracking-wider mb-6 flex items-center gap-2"><i class="fa-solid fa-plus text-purple-400"></i> Add Free Pack</h2>
            <input type="hidden" id="editVaultId"/>
            <div class="flex flex-col gap-4">
              <div><label class="gfx-label">Pack Title *</label><input id="vTitle" type="text" class="gfx-input" placeholder="e.g. PNG Pack #01"/></div>
              <div><label class="gfx-label">Description</label><textarea id="vDesc" class="gfx-input" rows="2" placeholder="What's inside this pack..."></textarea></div>
              <div>
                <label class="gfx-label">Download URL *</label>
                <input id="vDownloadUrl" type="url" class="gfx-input" placeholder="https://drive.google.com/..."/>
                <p class="font-poppins text-xs text-gray-700 mt-1">Google Drive, MediaFire, Mega etc.</p>
              </div>
              <div>
                <label class="gfx-label">Preview Image</label>
                <label class="upload-zone block cursor-pointer mb-2">
                  <i class="fa-solid fa-image text-purple-600 text-xl mb-1"></i>
                  <p class="font-poppins text-xs text-gray-500">Upload preview (max 2MB)</p>
                  <input id="vPreviewFile" type="file" accept="image/*" class="hidden"/>
                </label>
                <input id="vPreviewUrl" type="url" class="gfx-input" placeholder="Or paste image URL..."/>
              </div>
              <div class="grid grid-cols-2 gap-3">
                <div><label class="gfx-label">File Count</label><input id="vFileCount" type="text" class="gfx-input" placeholder="e.g. 50 files"/></div>
                <div><label class="gfx-label">File Size</label><input id="vFileSize" type="text" class="gfx-input" placeholder="e.g. 240 MB"/></div>
              </div>
            </div>
            <div class="flex gap-3 mt-6">
              <button id="saveVaultBtn" onclick="saveVaultItem()" class="btn-purple flex-1 px-4 py-3 rounded-xl font-poppins font-semibold text-xs tracking-wider text-white uppercase flex items-center justify-center">
                <i class="fa-solid fa-plus mr-2"></i>Add Pack
              </button>
              <button id="cancelEditVault" onclick="cancelVaultEdit()" class="hidden btn-liquid px-4 py-3 rounded-xl font-poppins text-xs text-gray-400 uppercase">Cancel</button>
            </div>
          </div>
          <div class="lg:col-span-3 glass-card rounded-2xl p-6">
            <div class="flex items-center justify-between mb-6">
              <h2 class="font-bebas text-2xl text-white tracking-wider flex items-center gap-2"><i class="fa-solid fa-box-open text-purple-400"></i> Vault Packs</h2>
              <button onclick="loadAdminVault()" class="btn-icon text-gray-500 hover:text-purple-300"><i class="fa-solid fa-rotate-right text-xs"></i></button>
            </div>
            <div id="dashVaultList" class="flex flex-col gap-3 max-h-[600px] overflow-y-auto pr-1">
              <div class="flex justify-center py-10"><div class="spinner"></div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- PRICING SECTION -->
      <div id="pricingSection" class="dash-section">
        <div class="glass-card rounded-xl p-4 mb-6" style="background:rgba(191,0,255,.06);border-color:rgba(191,0,255,.3)">
          <p class="font-poppins text-xs text-purple-300 flex items-start gap-2">
            <i class="fa-solid fa-circle-info mt-0.5 flex-shrink-0"></i>
            <span>Tier number controls the order (1 = top/first). Enable <strong>Popular</strong> to highlight a card. Features: one per line in the textarea.</span>
          </p>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
          <div id="pricingForm" class="lg:col-span-2 glass-card rounded-2xl p-6 h-fit">
            <h2 class="font-bebas text-2xl text-white tracking-wider mb-6 flex items-center gap-2"><i class="fa-solid fa-plus text-purple-400"></i> Add Pricing Tier</h2>
            <input type="hidden" id="editPricingId"/>
            <div class="flex flex-col gap-4">
              <div class="grid grid-cols-2 gap-3">
                <div><label class="gfx-label">Tier # *</label><input id="prTier" type="number" min="1" class="gfx-input" placeholder="1"/></div>
                <div><label class="gfx-label">Name *</label><input id="prName" type="text" class="gfx-input" placeholder="Starter"/></div>
              </div>
              <div><label class="gfx-label">Subtitle</label><input id="prSubtitle" type="text" class="gfx-input" placeholder="For new squads..."/></div>
              <div class="grid grid-cols-2 gap-3">
                <div><label class="gfx-label">Price *</label><input id="prPrice" type="text" class="gfx-input" placeholder="‚Çπ99"/></div>
                <div><label class="gfx-label">Period</label><input id="prPeriod" type="text" class="gfx-input" placeholder="design"/></div>
              </div>
              <div>
                <label class="gfx-label">Features (one per line)</label>
                <textarea id="prFeatures" class="gfx-input" rows="5" placeholder="1 Logo Design&#10;PNG + JPG Delivery&#10;1 Revision&#10;48hr Delivery"></textarea>
              </div>
              <div><label class="gfx-label">CTA Button Label</label><input id="prCtaLabel" type="text" class="gfx-input" placeholder="Get Started"/></div>
              <div><label class="gfx-label">CTA Button URL (optional)</label><input id="prCtaUrl" type="url" class="gfx-input" placeholder="https://wa.me/..."/></div>
              <div class="flex items-center gap-3 p-3 rounded-xl" style="background:rgba(191,0,255,.08);border:1px solid rgba(191,0,255,.2)">
                <input id="prHighlighted" type="checkbox" class="w-4 h-4 accent-purple-500"/>
                <label for="prHighlighted" class="font-poppins text-sm text-gray-300 cursor-pointer">‚≠ê Mark as Popular (highlighted)</label>
              </div>
            </div>
            <div class="flex gap-3 mt-6">
              <button id="savePricingBtn" onclick="savePricingItem()" class="btn-purple flex-1 px-4 py-3 rounded-xl font-poppins font-semibold text-xs tracking-wider text-white uppercase flex items-center justify-center">
                <i class="fa-solid fa-plus mr-2"></i>Add Tier
              </button>
              <button id="cancelEditPricing" onclick="cancelPricingEdit()" class="hidden btn-liquid px-4 py-3 rounded-xl font-poppins text-xs text-gray-400 uppercase">Cancel</button>
            </div>
          </div>
          <div class="lg:col-span-3 glass-card rounded-2xl p-6">
            <div class="flex items-center justify-between mb-6">
              <h2 class="font-bebas text-2xl text-white tracking-wider flex items-center gap-2"><i class="fa-solid fa-tags text-purple-400"></i> Pricing Tiers</h2>
              <button onclick="loadAdminPricing()" class="btn-icon text-gray-500 hover:text-purple-300"><i class="fa-solid fa-rotate-right text-xs"></i></button>
            </div>
            <div id="dashPricingList" class="flex flex-col gap-3 max-h-[600px] overflow-y-auto pr-1">
              <div class="flex justify-center py-10"><div class="spinner"></div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- USERS SECTION -->
      <div id="usersSection" class="dash-section">
        <div class="glass-card rounded-2xl p-6">
          <div class="flex items-center justify-between mb-6">
            <div>
              <h2 class="font-bebas text-2xl text-white tracking-wider flex items-center gap-2"><i class="fa-solid fa-users text-purple-400"></i> Registered Users</h2>
              <p class="font-mono text-xs text-gray-600 mt-1">Manage customer accounts and paid works count</p>
            </div>
            <button onclick="loadAdminUsers()" class="btn-icon text-gray-500 hover:text-purple-300"><i class="fa-solid fa-rotate-right text-xs"></i></button>
          </div>
          <div id="adminUserList" class="flex flex-col gap-4 max-h-[700px] overflow-y-auto pr-1">
            <div class="flex justify-center py-10"><div class="spinner"></div></div>
          </div>
        </div>
      </div>

      <!-- BRANDING SECTION -->
      <div id="brandingSection" class="dash-section">
        <div class="max-w-lg glass-card rounded-2xl p-8">
          <h2 class="font-bebas text-2xl text-white tracking-wider mb-2 flex items-center gap-2">
            <i class="fa-solid fa-palette text-purple-400"></i> Site Branding
          </h2>
          <p class="font-mono text-xs text-gray-600 mb-7">Change the navbar logo. Upload a PNG/SVG or paste a URL.</p>

          <!-- Current logo preview -->
          <div class="mb-6">
            <label class="gfx-label">Current Logo</label>
            <div class="flex items-center gap-4 p-4 rounded-xl" style="background:rgba(191,0,255,.06);border:1px solid rgba(191,0,255,.2)">
              <img id="logoPreview" src="" alt="Logo Preview"
                class="h-10 w-auto object-contain hidden rounded-lg"
                onerror="this.classList.add('hidden')"/>
              <div id="logoCurrent" class="flex items-center gap-2">
                <i class="fa-solid fa-fire text-purple-400 text-2xl"></i>
                <span class="font-bebas text-white text-xl tracking-widest">LOKAYA<span class="text-purple-400">GFX</span></span>
              </div>
            </div>
          </div>

          <!-- Upload new logo -->
          <div class="mb-4">
            <label class="gfx-label">Upload New Logo (PNG / SVG / WebP ‚Äî max 2MB)</label>
            <label class="upload-zone block cursor-pointer mb-3">
              <i class="fa-solid fa-cloud-arrow-up text-purple-600 text-2xl mb-2"></i>
              <p class="font-poppins text-xs text-gray-500">Click to upload logo image</p>
              <input type="file" accept="image/*" class="hidden" onchange="handleLogoUpload(this)"/>
            </label>
          </div>

          <!-- Or paste URL -->
          <div class="mb-6">
            <label class="gfx-label">Or Paste Image URL</label>
            <input id="siteLogoUrl" type="url" class="gfx-input" placeholder="https://res.cloudinary.com/dsyvnaog6/..."/>
          </div>

          <!-- Tip -->
          <div class="flex items-start gap-3 p-3 rounded-xl mb-6"
               style="background:rgba(191,0,255,.06);border:1px solid rgba(191,0,255,.15)">
            <i class="fa-solid fa-lightbulb text-yellow-400 text-xs mt-0.5 flex-shrink-0"></i>
            <p class="font-poppins text-xs text-gray-500 leading-relaxed">
              Recommended: <strong class="text-purple-300">transparent PNG</strong>, height ~60px, white or light colored logo works best on dark background.
            </p>
          </div>

          <button id="saveLogoBtn" onclick="saveLogoUrl()"
            class="btn-purple w-full py-3.5 rounded-xl font-poppins font-bold text-sm text-white flex items-center justify-center gap-2">
            <i class="fa-solid fa-floppy-disk"></i> Save Logo
          </button>
        </div>
      </div>

    </div>
  </div>
</div><!-- /dashboard -->

</body>
</html>
